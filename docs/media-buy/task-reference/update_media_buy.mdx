---
title: update_media_buy
sidebar_position: 8
testable: true
---

# update_media_buy

Modify an existing media buy using PATCH semantics. Supports campaign-level and package-level updates.

**Response Time**: Instant to days (status: `completed`, `working` < 120s, or `submitted` for manual review)

**PATCH Semantics**: Only specified fields are updated; omitted fields remain unchanged.

**Request Schema**: [`/schemas/v2/media-buy/update-media-buy-request.json`](https://adcontextprotocol.org/schemas/v2/media-buy/update-media-buy-request.json)
**Response Schema**: [`/schemas/v2/media-buy/update-media-buy-response.json`](https://adcontextprotocol.org/schemas/v2/media-buy/update-media-buy-response.json)

## Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `media_buy_id` | string | Yes* | Publisher's media buy identifier to update |
| `buyer_ref` | string | Yes* | Your reference for the media buy to update |
| `start_time` | string | No | Updated campaign start time |
| `end_time` | string | No | Updated campaign end time |
| `paused` | boolean | No | Pause/resume entire media buy (true = paused, false = active) |
| `packages` | PackageUpdate[] | No | Package-level updates (see below) |

*Either `media_buy_id` OR `buyer_ref` is required (not both)

### Package Update Object

| Parameter | Type | Description |
|-----------|------|-------------|
| `package_id` | string | Publisher's package identifier to update |
| `buyer_ref` | string | Your reference for the package to update |
| `paused` | boolean | Pause/resume specific package (true = paused, false = active) |
| `budget` | number | Updated budget allocation |
| `pacing` | string | Updated pacing strategy |
| `bid_price` | number | Updated bid price (auction products only) |
| `targeting_overlay` | TargetingOverlay | Updated targeting restrictions |
| `creative_ids` | string[] | Replace assigned creatives |

*Either `package_id` OR `buyer_ref` is required for each package update

## Response

Returns updated media buy with status:

| Field | Description |
|-------|-------------|
| `media_buy_id` | Media buy identifier |
| `buyer_ref` | Buyer's reference identifier |
| `status` | Update status (`"completed"`, `"working"`, `"submitted"`) |
| `affected_packages` | Array of full Package objects showing complete state after update |
| `implementation_date` | ISO 8601 timestamp when changes take effect (null if pending approval) |
| `message` | Human-readable update description |

See [schema](https://adcontextprotocol.org/schemas/v2/media-buy/update-media-buy-response.json) for complete field list.

## Common Scenarios

**Note**: These examples use `buyer_ref` to reference media buys and packages by your own identifiers. You can also use the publisher's `media_buy_id` and `package_id` if you prefer.

### Pause Campaign

```javascript
import { testAgent } from '@adcp/client/testing';

// Pause entire campaign using your reference
const result = await testAgent.updateMediaBuy({
  buyer_ref: 'mb_summer_2025',
  paused: true
});

console.log(`Campaign paused`);
```

### Update Package Budget

```javascript
import { testAgent } from '@adcp/client/testing';

// Increase budget for specific package using your reference
const result = await testAgent.updateMediaBuy({
  buyer_ref: 'mb_summer_2025',
  packages: [{
    buyer_ref: 'pkg_premium',
    budget: 25000  // Increased from 15000
  }]
});

if (result.affected_packages?.length) {
  console.log(`Package budget updated to ${result.affected_packages[0].budget}`);
}
```

### Change Campaign Dates

```javascript
import { testAgent } from '@adcp/client/testing';

// Extend campaign end date
const result = await testAgent.updateMediaBuy({
  buyer_ref: 'mb_summer_2025',
  end_time: '2025-09-30T23:59:59Z'  // Extended from original end date
});

console.log(`Campaign extended to: ${result.end_time}`);
```

### Update Targeting

```javascript
import { testAgent } from '@adcp/client/testing';

// Add geographic restrictions to package
const result = await testAgent.updateMediaBuy({
  buyer_ref: 'mb_summer_2025',
  packages: [{
    buyer_ref: 'pkg_premium',
    targeting_overlay: {
      geo_country_any_of: ['US', 'CA'],
      geo_region_any_of: ['CA', 'NY', 'TX', 'ON', 'QC']
    }
  }]
});

console.log('Targeting updated successfully');
```

### Replace Creatives

```javascript
import { testAgent } from '@adcp/client/testing';

// Swap out creative assets
const result = await testAgent.updateMediaBuy({
  buyer_ref: 'mb_summer_2025',
  packages: [{
    buyer_ref: 'pkg_premium',
    creative_ids: ['creative_video_002', 'creative_display_002']
  }]
});

if (result.affected_packages?.length) {
  console.log(`Assigned ${result.affected_packages[0].creative_assignments.length} new creatives`);
}
```

## What Can Be Updated

### Campaign-Level Updates

✅ **Can update:**
- Start/end times (subject to seller approval)
- Campaign pause state (paused/active)
- Reporting webhook configuration

❌ **Cannot update:**
- Media buy ID
- Buyer reference
- Brand manifest
- Original package product IDs

### Package-Level Updates

✅ **Can update:**
- Budget allocation
- Pacing strategy
- Bid prices (auction products)
- Targeting overlays
- Creative assignments
- Package pause state

❌ **Cannot update:**
- Package ID
- Product ID
- Pricing option ID
- Format IDs (creatives must match existing formats)

## Update Approval

Some updates require seller approval and return `status: "submitted"`:

- **Significant budget increases** (threshold varies by seller)
- **Date range changes** affecting inventory availability
- **Targeting changes** that alter campaign scope
- **Creative changes** requiring policy review

When approval is needed, check the response status and message fields.

## PATCH Semantics

Only specified fields are updated. For example, updating only the budget leaves all other package fields (pacing, targeting, creatives) unchanged.

To replace arrays (like creative_ids), provide the complete new array (replaces ALL creatives with new list).

## Error Handling

| Error Code | Description | Resolution |
|------------|-------------|------------|
| `AUTH_REQUIRED` | Authentication needed | Provide credentials |
| `INVALID_REQUEST` | Invalid field values | Check request against schema |
| `MEDIA_BUY_NOT_FOUND` | Media buy doesn't exist | Verify media_buy_id |
| `PACKAGE_NOT_FOUND` | Package doesn't exist | Verify package_id |
| `UPDATE_NOT_ALLOWED` | Field cannot be changed | See "What Can Be Updated" above |
| `POLICY_VIOLATION` | Update violates content policy | Review policy message |
| `BUDGET_INSUFFICIENT` | New budget below minimum | Increase budget amount |

## Async Workflows

Updates may be asynchronous, especially with seller approval. Check the response `status` field:
- `"completed"` - Update applied immediately
- `"working"` - Processing (poll or use webhooks)
- `"submitted"` - Requires manual approval (hours to days)

See [Task Management](/docs/protocols/task-management) for protocol-specific async patterns.

## Best Practices

**1. Use Precise Updates**
Update only what needs to change - don't resend unchanged values.

**2. Budget Increases**
Small incremental increases are more likely to be auto-approved than large jumps.

**3. Pause Before Major Changes**
Pause campaigns before making significant targeting or creative changes.

**4. Test with Small Changes**
Test update workflows with minor changes before critical campaign modifications.

**5. Monitor Status**
Always check response status and message for approval requirements or errors.

## Next Steps

After updating a media buy:

1. **Verify Changes**: Use [`get_media_buy_delivery`](/docs/media-buy/task-reference/get_media_buy_delivery) to confirm updates
2. **Upload New Creatives**: Use [`sync_creatives`](/docs/media-buy/task-reference/sync_creatives) if creative_ids changed
3. **Monitor Performance**: Track impact of changes on campaign metrics
4. **Optimize Further**: Use [`provide_performance_feedback`](/docs/media-buy/task-reference/provide_performance_feedback) for ongoing optimization

## Learn More

- [Media Buy Lifecycle](/docs/media-buy/media-buys/) - Complete campaign workflow
- [Targeting](/docs/media-buy/advanced-topics/targeting) - Targeting overlays and restrictions
- [Task Management](/docs/protocols/task-management) - Async patterns and status checking
- [create_media_buy](/docs/media-buy/task-reference/create_media_buy) - Initial campaign creation
