---
title: get_media_buy_delivery
sidebar_position: 6
testable: true
---

# get_media_buy_delivery

Retrieve comprehensive delivery metrics and performance data for media buy reporting.

**Response Time**: ~60 seconds (reporting query)

**Request Schema**: [`/schemas/v1/media-buy/get-media-buy-delivery-request.json`](https://adcontextprotocol.org/schemas/v1/media-buy/get-media-buy-delivery-request.json)
**Response Schema**: [`/schemas/v1/media-buy/get-media-buy-delivery-response.json`](https://adcontextprotocol.org/schemas/v1/media-buy/get-media-buy-delivery-response.json)

## Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `media_buy_ids` | string[] | No* | Array of media buy IDs to retrieve |
| `buyer_refs` | string[] | No* | Array of buyer reference IDs |
| `status_filter` | string \| string[] | No | Status filter: `"active"`, `"pending"`, `"paused"`, `"completed"`, `"failed"`, `"all"`. Defaults to `["active"]` |
| `start_date` | string | No | Report start date (YYYY-MM-DD) |
| `end_date` | string | No | Report end date (YYYY-MM-DD) |

*Either `media_buy_ids` or `buyer_refs` can be provided. If neither provided, returns all media buys in current session context.

## Response

Returns delivery report with aggregated totals and per-media-buy breakdowns:

| Field | Description |
|-------|-------------|
| `reporting_period` | Date range for report (start/end timestamps) |
| `currency` | ISO 4217 currency code (USD, EUR, GBP, etc.) |
| `aggregated_totals` | Combined metrics across all media buys (impressions, spend, clicks, video_completions, media_buy_count) |
| `media_buy_deliveries` | Array of delivery data per media buy |

### Media Buy Delivery Object

| Field | Description |
|-------|-------------|
| `media_buy_id` | Media buy identifier |
| `buyer_ref` | Buyer's reference identifier |
| `status` | Current status (`pending`, `active`, `paused`, `completed`, `failed`) |
| `totals` | Aggregate metrics (impressions, spend, clicks, ctr, video_completions, completion_rate) |
| `by_package` | Package-level breakdowns with pacing_index |
| `daily_breakdown` | Day-by-day delivery (date, impressions, spend) |

See [schema](https://adcontextprotocol.org/schemas/v1/media-buy/get-media-buy-delivery-response.json) for complete field list.

## Common Scenarios

### Single Media Buy

<CodeGroup>

```javascript JavaScript
import { ADCPMultiAgentClient } from '@adcp/client';

const client = new ADCPMultiAgentClient([{
  id: 'test-agent',
  agent_uri: 'https://test-agent.adcontextprotocol.org/mcp',
  protocol: 'mcp',
  auth: {
    type: 'bearer',
    token: '1v8tAhASaUYYp4odoQ1PnMpdqNaMiTrCRqYo9OJp6IQ'
  }
}]);

const agent = client.agent('test-agent');

// Get single media buy delivery report
const result = await agent.getMediaBuyDelivery({
  media_buy_ids: ['mb_12345'],
  start_date: '2024-02-01',
  end_date: '2024-02-07'
});

console.log(`Delivered ${result.aggregated_totals.impressions.toLocaleString()} impressions`);
console.log(`Spend: $${result.aggregated_totals.spend.toFixed(2)}`);
console.log(`CTR: ${(result.media_buy_deliveries[0].totals.ctr * 100).toFixed(2)}%`);
```

```python Python
from adcp import ADCPMultiAgentClient

client = ADCPMultiAgentClient([{
    'id': 'test-agent',
    'agent_uri': 'https://test-agent.adcontextprotocol.org/mcp',
    'protocol': 'mcp',
    'auth': {
        'type': 'bearer',
        'token': '1v8tAhASaUYYp4odoQ1PnMpdqNaMiTrCRqYo9OJp6IQ'
    }
}])

agent = client.agent('test-agent')

# Get single media buy delivery report
result = agent.get_media_buy_delivery(
    media_buy_ids=['mb_12345'],
    start_date='2024-02-01',
    end_date='2024-02-07'
)

print(f"Delivered {result['aggregated_totals']['impressions']:,} impressions")
print(f"Spend: ${result['aggregated_totals']['spend']:.2f}")
print(f"CTR: {result['media_buy_deliveries'][0]['totals']['ctr'] * 100:.2f}%")
```

</CodeGroup>

### Multiple Media Buys

<CodeGroup>

```javascript JavaScript
// Get all active media buys from context
const result = await agent.getMediaBuyDelivery({
  status_filter: 'active',
  start_date: '2024-02-01',
  end_date: '2024-02-07'
});

console.log(`${result.aggregated_totals.media_buy_count} active campaigns`);
console.log(`Total impressions: ${result.aggregated_totals.impressions.toLocaleString()}`);
console.log(`Total spend: $${result.aggregated_totals.spend.toFixed(2)}`);

// Review each campaign
result.media_buy_deliveries.forEach(delivery => {
  console.log(`${delivery.media_buy_id}: ${delivery.totals.impressions.toLocaleString()} impressions, CTR ${(delivery.totals.ctr * 100).toFixed(2)}%`);
});
```

```python Python
# Get all active media buys from context
result = agent.get_media_buy_delivery(
    status_filter='active',
    start_date='2024-02-01',
    end_date='2024-02-07'
)

print(f"{result['aggregated_totals']['media_buy_count']} active campaigns")
print(f"Total impressions: {result['aggregated_totals']['impressions']:,}")
print(f"Total spend: ${result['aggregated_totals']['spend']:.2f}")

# Review each campaign
for delivery in result['media_buy_deliveries']:
    print(f"{delivery['media_buy_id']}: {delivery['totals']['impressions']:,} impressions, CTR {delivery['totals']['ctr'] * 100:.2f}%")
```

</CodeGroup>

### Date Range Reporting

<CodeGroup>

```javascript JavaScript
// Get month-to-date performance
const now = new Date();
const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
const dateFormat = date => date.toISOString().split('T')[0];

const result = await agent.getMediaBuyDelivery({
  media_buy_ids: ['mb_12345'],
  start_date: dateFormat(monthStart),
  end_date: dateFormat(now)
});

// Analyze daily breakdown
const dailyBreakdown = result.media_buy_deliveries[0].daily_breakdown;
console.log(`Daily average: ${Math.round(result.aggregated_totals.impressions / dailyBreakdown.length).toLocaleString()} impressions`);

// Find peak day
const peakDay = dailyBreakdown.reduce((max, day) =>
  day.impressions > max.impressions ? day : max
);
console.log(`Peak day: ${peakDay.date} with ${peakDay.impressions.toLocaleString()} impressions`);
```

```python Python
from datetime import date

# Get month-to-date performance
today = date.today()
month_start = date(today.year, today.month, 1)

result = agent.get_media_buy_delivery(
    media_buy_ids=['mb_12345'],
    start_date=str(month_start),
    end_date=str(today)
)

# Analyze daily breakdown
daily_breakdown = result['media_buy_deliveries'][0]['daily_breakdown']
daily_avg = result['aggregated_totals']['impressions'] // len(daily_breakdown)
print(f"Daily average: {daily_avg:,} impressions")

# Find peak day
peak_day = max(daily_breakdown, key=lambda d: d['impressions'])
print(f"Peak day: {peak_day['date']} with {peak_day['impressions']:,} impressions")
```

</CodeGroup>

### Multi-Status Query

<CodeGroup>

```javascript JavaScript
// Get both active and paused campaigns
const result = await agent.getMediaBuyDelivery({
  status_filter: ['active', 'paused'],
  start_date: '2024-02-01',
  end_date: '2024-02-07'
});

// Group by status
const byStatus = result.media_buy_deliveries.reduce((acc, delivery) => {
  if (!acc[delivery.status]) acc[delivery.status] = [];
  acc[delivery.status].push(delivery);
  return acc;
}, {});

console.log(`Active campaigns: ${byStatus.active?.length || 0}`);
console.log(`Paused campaigns: ${byStatus.paused?.length || 0}`);

// Identify underperforming campaigns
byStatus.paused?.forEach(delivery => {
  const avgPacing = delivery.by_package.reduce((sum, pkg) => sum + pkg.pacing_index, 0) / delivery.by_package.length;
  console.log(`${delivery.media_buy_id}: paused with ${(avgPacing * 100).toFixed(0)}% pacing`);
});
```

```python Python
# Get both active and paused campaigns
result = agent.get_media_buy_delivery(
    status_filter=['active', 'paused'],
    start_date='2024-02-01',
    end_date='2024-02-07'
)

# Group by status
from collections import defaultdict
by_status = defaultdict(list)
for delivery in result['media_buy_deliveries']:
    by_status[delivery['status']].append(delivery)

print(f"Active campaigns: {len(by_status['active'])}")
print(f"Paused campaigns: {len(by_status['paused'])}")

# Identify underperforming campaigns
for delivery in by_status['paused']:
    avg_pacing = sum(pkg['pacing_index'] for pkg in delivery['by_package']) / len(delivery['by_package'])
    print(f"{delivery['media_buy_id']}: paused with {avg_pacing * 100:.0f}% pacing")
```

</CodeGroup>

### Buyer Reference Query

<CodeGroup>

```javascript JavaScript
// Query by buyer reference instead of media buy ID
const result = await agent.getMediaBuyDelivery({
  buyer_refs: ['nike_q1_campaign_2024', 'nike_q1_retargeting_2024']
});

// Lifetime delivery data (no date range specified)
console.log(`Total lifetime impressions: ${result.aggregated_totals.impressions.toLocaleString()}`);
console.log(`Total lifetime spend: $${result.aggregated_totals.spend.toFixed(2)}`);

// Compare campaigns
result.media_buy_deliveries.forEach(delivery => {
  const cpm = (delivery.totals.spend / delivery.totals.impressions) * 1000;
  console.log(`${delivery.buyer_ref}: CPM $${cpm.toFixed(2)}, CTR ${(delivery.totals.ctr * 100).toFixed(2)}%`);
});
```

```python Python
# Query by buyer reference instead of media buy ID
result = agent.get_media_buy_delivery(
    buyer_refs=['nike_q1_campaign_2024', 'nike_q1_retargeting_2024']
)

# Lifetime delivery data (no date range specified)
print(f"Total lifetime impressions: {result['aggregated_totals']['impressions']:,}")
print(f"Total lifetime spend: ${result['aggregated_totals']['spend']:.2f}")

# Compare campaigns
for delivery in result['media_buy_deliveries']:
    cpm = (delivery['totals']['spend'] / delivery['totals']['impressions']) * 1000
    print(f"{delivery['buyer_ref']}: CPM ${cpm:.2f}, CTR {delivery['totals']['ctr'] * 100:.2f}%")
```

</CodeGroup>

## Metrics Definitions

| Metric | Definition |
|--------|------------|
| **Impressions** | Number of times ads were displayed |
| **Spend** | Amount spent in specified currency |
| **Clicks** | Number of ad clicks (if available) |
| **CTR** | Click-through rate (clicks/impressions) |
| **Video Completions** | Videos watched to completion |
| **Completion Rate** | Video completions/video impressions |
| **Pacing Index** | Actual vs. expected delivery rate (1.0 = on track, <1.0 = behind, >1.0 = ahead) |
| **CPM** | Cost per thousand impressions (spend/impressions * 1000) |

## Query Behavior

### Context-Based Queries
- If neither `media_buy_ids` nor `buyer_refs` provided, returns all media buys from current session context
- Context established by previous operations (e.g., `create_media_buy`)

### Status Filtering
- Defaults to `["active"]` if not specified
- Can be single string (`"active"`) or array (`["active", "paused"]`)
- Use `"all"` to return media buys of any status

### Date Ranges
- If dates not specified, returns lifetime delivery data
- Date format: `YYYY-MM-DD`
- Daily breakdown may be truncated for long date ranges to reduce response size

### Metric Availability
- **Universal**: Impressions, spend (available on all platforms)
- **Format-dependent**: Clicks, video completions (depends on inventory type and platform capabilities)
- **Package-level**: All metrics broken down by package with pacing_index

## Data Freshness

- Reporting data typically has 2-4 hour delay
- Real-time impression counts not available
- Use for periodic reporting and optimization decisions, not live monitoring

## Error Handling

| Error Code | Description | Resolution |
|------------|-------------|------------|
| `AUTH_REQUIRED` | Authentication needed | Provide credentials |
| `MEDIA_BUY_NOT_FOUND` | Media buy doesn't exist | Verify media_buy_id |
| `INVALID_DATE_RANGE` | Invalid start/end dates | Use YYYY-MM-DD format, ensure start < end |
| `CONTEXT_REQUIRED` | No media buys in context | Provide media_buy_ids or buyer_refs explicitly |
| `INVALID_STATUS_FILTER` | Invalid status value | Use valid status: active, pending, paused, completed, failed, all |

## Best Practices

**1. Use Date Ranges for Analysis**
Specify date ranges for period-over-period comparisons and trend analysis.

**2. Monitor Pacing Index**
Aim for 0.95-1.05 pacing index. Values outside this range indicate delivery issues.

**3. Check Daily Breakdown**
Identify delivery patterns and weekend/weekday performance differences.

**4. Compare Package Performance**
Use `by_package` breakdowns to identify best-performing inventory.

**5. Track Status Changes**
Use multi-status queries to understand why campaigns were paused or completed.

## Next Steps

After retrieving delivery data:

1. **Optimize Campaigns**: Use [`update_media_buy`](/docs/media-buy/task-reference/update_media_buy) to adjust budgets, pacing, or targeting
2. **Provide Feedback**: Use [`provide_performance_feedback`](/docs/media-buy/task-reference/provide_performance_feedback) to share results with seller
3. **Update Creatives**: Use [`sync_creatives`](/docs/media-buy/task-reference/sync_creatives) to refresh underperforming assets
4. **Create Follow-Up Campaigns**: Use [`create_media_buy`](/docs/media-buy/task-reference/create_media_buy) based on insights

## Learn More

- [Media Buy Lifecycle](/docs/media-buy/media-buys/) - Complete campaign workflow
- [Task Management](/docs/protocols/task-management) - Async patterns and status handling
- [Performance Optimization](/docs/media-buy/advanced-topics/optimization) - Using delivery data for optimization
