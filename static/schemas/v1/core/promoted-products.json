{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/v1/core/promoted-products.json",
  "title": "Promoted Products",
  "description": "Specification of products or offerings being promoted in a campaign. Supports multiple selection methods that can be combined using UNION (OR) logic: direct SKUs, tag-based filtering, category selection, natural language queries, and inline offering definitions for non-commerce campaigns. When multiple selection methods are provided, products matching ANY of the criteria are selected (logical OR, not AND).",
  "type": "object",
  "properties": {
    "skus": {
      "type": "array",
      "description": "Direct product SKU references from the brand's product catalog",
      "items": {
        "type": "string"
      }
    },
    "tags": {
      "type": "array",
      "description": "Select products by tags from the product catalog (e.g., 'organic', 'sauces', 'holiday')",
      "items": {
        "type": "string"
      }
    },
    "category": {
      "type": "string",
      "description": "Select products from a specific category in the product catalog (e.g., 'beverages/soft-drinks', 'food/sauces')"
    },
    "query": {
      "type": "string",
      "description": "Natural language query to select products (e.g., 'all Kraft Heinz pasta sauces', 'organic products under $20')"
    },
    "offerings": {
      "type": "array",
      "description": "Inline offering definitions for non-commerce campaigns or campaigns without a product catalog. Use when promoting services, events, brand awareness, or other non-SKU offerings.",
      "items": {
        "type": "object",
        "properties": {
          "offering_id": {
            "type": "string",
            "description": "Unique identifier for this offering"
          },
          "name": {
            "type": "string",
            "description": "Name of the offering being promoted"
          },
          "description": {
            "type": "string",
            "description": "Description of what is being promoted"
          },
          "message": {
            "type": "string",
            "description": "Product-specific message or context for creative generation. Provides additional context beyond the overall campaign message."
          },
          "link": {
            "type": "string",
            "format": "uri",
            "description": "Landing page or destination URL for this offering"
          },
          "assets": {
            "type": "array",
            "description": "Campaign-specific assets for this offering (in addition to brand card assets)",
            "items": {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string"
                },
                "asset_type": {
                  "type": "string",
                  "enum": ["image", "video", "audio", "text"]
                },
                "url": {
                  "type": "string",
                  "format": "uri"
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "width": {
                  "type": "integer"
                },
                "height": {
                  "type": "integer"
                },
                "duration_seconds": {
                  "type": "number"
                },
                "format": {
                  "type": "string"
                }
              },
              "required": ["asset_id", "asset_type", "url"]
            }
          },
          "metadata": {
            "type": "object",
            "description": "Additional offering-specific metadata",
            "additionalProperties": true
          }
        },
        "required": ["name", "description"],
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false,
  "examples": [
    {
      "skus": ["SKU-12345", "SKU-67890"],
      "description": "Direct SKU selection for specific products"
    },
    {
      "tags": ["organic", "sauces"],
      "category": "food/condiments",
      "description": "UNION selection: products tagged 'organic' OR 'sauces' OR in 'food/condiments' category"
    },
    {
      "query": "all Kraft Heinz pasta sauces under $5",
      "description": "Natural language product selection"
    },
    {
      "offerings": [
        {
          "offering_id": "q1_brand_awareness",
          "name": "Q1 Brand Awareness Campaign",
          "description": "Promote our new sustainability initiative and brand values",
          "message": "Focus on environmental impact and corporate responsibility",
          "link": "https://brand.com/sustainability",
          "assets": [
            {
              "asset_id": "sustainability_hero",
              "asset_type": "image",
              "url": "https://cdn.brand.com/sustainability-hero.jpg",
              "tags": ["campaign", "sustainability"],
              "width": 1920,
              "height": 1080,
              "format": "jpg"
            }
          ]
        }
      ],
      "description": "Non-commerce campaign with inline offering"
    },
    {
      "skus": ["SKU-123"],
      "offerings": [
        {
          "offering_id": "holiday_promo",
          "name": "Holiday Bundle Promotion",
          "description": "Buy 2 get 1 free holiday special",
          "message": "Limited time offer - perfect for gift giving"
        }
      ],
      "description": "Combine catalog SKUs with promotional offering context"
    }
  ]
}
