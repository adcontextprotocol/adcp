{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/v1/creative/asset-types/image.json",
  "title": "Image Asset Type Schema",
  "description": "Schema for static image assets in AdCP creative formats",
  "oneOf": [
    {
      "type": "object",
      "description": "Image with exact dimensions specified",
      "properties": {
        "asset_id": {
          "type": "string",
          "pattern": "^[a-z0-9_]+$",
          "description": "Unique identifier for this asset within the format"
        },
        "asset_type": {
          "type": "string",
          "const": "image"
        },
        "required": {
          "type": "boolean",
          "description": "Whether this asset is mandatory for the format"
        },
        "width": {
          "type": "integer",
          "minimum": 1,
          "maximum": 4096,
          "description": "Required width in pixels"
        },
        "height": {
          "type": "integer",
          "minimum": 1,
          "maximum": 4096,
          "description": "Required height in pixels"
        },
        "acceptable_formats": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["jpg", "jpeg", "png", "gif", "webp", "svg", "bmp"]
          },
          "minItems": 1,
          "uniqueItems": true,
          "description": "List of acceptable image file formats"
        },
        "max_file_size_kb": {
          "type": "number",
          "minimum": 1,
          "maximum": 10240,
          "description": "Maximum file size in kilobytes"
        },
        "min_file_size_kb": {
          "type": "number",
          "minimum": 0.1,
          "description": "Minimum file size in kilobytes"
        },
        "transparency": {
          "type": "boolean",
          "description": "Whether transparency is required/supported"
        },
        "animation_allowed": {
          "type": "boolean",
          "description": "Whether animated images (GIF, animated WebP) are allowed"
        },
        "min_resolution_dpi": {
          "type": "integer",
          "minimum": 72,
          "maximum": 600,
          "description": "Minimum resolution in dots per inch"
        },
        "color_mode": {
          "type": "string",
          "enum": ["rgb", "cmyk", "grayscale"],
          "description": "Required color mode"
        },
        "notes": {
          "type": "string",
          "maxLength": 500,
          "description": "Additional requirements or restrictions"
        }
      },
      "required": ["asset_id", "asset_type", "required", "width", "height"],
      "not": {
        "required": ["acceptable_dimensions"]
      },
      "additionalProperties": false
    },
    {
      "type": "object",
      "description": "Image with multiple acceptable dimension combinations",
      "properties": {
        "asset_id": {
          "type": "string",
          "pattern": "^[a-z0-9_]+$",
          "description": "Unique identifier for this asset within the format"
        },
        "asset_type": {
          "type": "string",
          "const": "image"
        },
        "required": {
          "type": "boolean",
          "description": "Whether this asset is mandatory for the format"
        },
        "acceptable_dimensions": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "width": {
                "type": "integer",
                "minimum": 1
              },
              "height": {
                "type": "integer",
                "minimum": 1
              }
            },
            "required": ["width", "height"],
            "additionalProperties": false
          },
          "minItems": 1,
          "description": "Array of acceptable width/height combinations"
        },
        "acceptable_formats": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["jpg", "jpeg", "png", "gif", "webp", "svg", "bmp"]
          },
          "minItems": 1,
          "uniqueItems": true,
          "description": "List of acceptable image file formats"
        },
        "max_file_size_kb": {
          "type": "number",
          "minimum": 1,
          "maximum": 10240,
          "description": "Maximum file size in kilobytes"
        },
        "min_file_size_kb": {
          "type": "number",
          "minimum": 0.1,
          "description": "Minimum file size in kilobytes"
        },
        "transparency": {
          "type": "boolean",
          "description": "Whether transparency is required/supported"
        },
        "animation_allowed": {
          "type": "boolean",
          "description": "Whether animated images (GIF, animated WebP) are allowed"
        },
        "min_resolution_dpi": {
          "type": "integer",
          "minimum": 72,
          "maximum": 600,
          "description": "Minimum resolution in dots per inch"
        },
        "color_mode": {
          "type": "string",
          "enum": ["rgb", "cmyk", "grayscale"],
          "description": "Required color mode"
        },
        "notes": {
          "type": "string",
          "maxLength": 500,
          "description": "Additional requirements or restrictions"
        }
      },
      "required": ["asset_id", "asset_type", "required", "acceptable_dimensions"],
      "not": {
        "required": ["width", "height"]
      },
      "additionalProperties": false
    }
  ]
}