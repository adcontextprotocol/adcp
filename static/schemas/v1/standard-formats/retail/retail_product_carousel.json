{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/v1/standard-formats/retail/retail_product_carousel.json",
  "title": "Retail Product Carousel",
  "description": "Multi-product carousel format for e-commerce and retail media networks",
  "type": "object",
  "properties": {
    "format_id": {
      "type": "string",
      "const": "retail_product_carousel"
    },
    "type": {
      "type": "string",
      "const": "retail"
    },
    "category": {
      "type": "string",
      "const": "standard"
    },
    "name": {
      "type": "string",
      "default": "Product Carousel"
    },
    "is_standard": {
      "type": "boolean",
      "const": true
    },
    "is_3p_served": {
      "type": "boolean",
      "const": false
    },
    "min_products": {
      "type": "integer",
      "const": 3
    },
    "max_products": {
      "type": "integer",
      "const": 10
    },
    "product_schema": {
      "type": "object",
      "description": "Schema for each product in the carousel",
      "properties": {
        "assets_required": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "product_image"
                },
                "asset_type": {
                  "type": "string",
                  "const": "image"
                },
                "required": {
                  "type": "boolean",
                  "const": true
                },
                "acceptable_dimensions": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "width": {"type": "integer"},
                      "height": {"type": "integer"}
                    }
                  },
                  "default": [
                    {"width": 500, "height": 500},
                    {"width": 1000, "height": 1000}
                  ]
                },
                "aspect_ratio": {
                  "type": "string",
                  "const": "1:1"
                },
                "acceptable_formats": {
                  "type": "array",
                  "const": ["jpg", "png", "webp"]
                },
                "max_file_size_kb": {
                  "type": "number",
                  "const": 200
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "product_name"
                },
                "asset_type": {
                  "type": "string",
                  "const": "text"
                },
                "required": {
                  "type": "boolean",
                  "const": true
                },
                "text_type": {
                  "type": "string",
                  "const": "title"
                },
                "max_length": {
                  "type": "integer",
                  "const": 100
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "product_price"
                },
                "asset_type": {
                  "type": "string",
                  "const": "text"
                },
                "required": {
                  "type": "boolean",
                  "const": true
                },
                "text_type": {
                  "type": "string",
                  "const": "price"
                },
                "format": {
                  "type": "string",
                  "const": "currency"
                },
                "currency": {
                  "type": "string",
                  "enum": ["USD", "EUR", "GBP"]
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "product_url"
                },
                "asset_type": {
                  "type": "string",
                  "const": "url"
                },
                "required": {
                  "type": "boolean",
                  "const": true
                },
                "url_type": {
                  "type": "string",
                  "const": "product_page"
                },
                "must_be_https": {
                  "type": "boolean",
                  "const": true
                }
              }
            }
          ]
        },
        "optional_assets": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "product_rating"
                },
                "asset_type": {
                  "type": "string",
                  "const": "data"
                },
                "data_type": {
                  "type": "string",
                  "const": "rating"
                },
                "scale": {
                  "type": "integer",
                  "const": 5
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "sale_price"
                },
                "asset_type": {
                  "type": "string",
                  "const": "text"
                },
                "text_type": {
                  "type": "string",
                  "const": "price"
                },
                "format": {
                  "type": "string",
                  "const": "currency"
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "asset_id": {
                  "type": "string",
                  "const": "product_badge"
                },
                "asset_type": {
                  "type": "string",
                  "const": "text"
                },
                "text_type": {
                  "type": "string",
                  "const": "badge"
                },
                "examples": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": ["Sale", "New", "Limited", "Bestseller"]
                }
              }
            }
          ]
        }
      }
    },
    "global_assets": {
      "type": "array",
      "description": "Assets that apply to the entire carousel",
      "items": [
        {
          "type": "object",
          "properties": {
            "asset_id": {
              "type": "string",
              "const": "brand_logo"
            },
            "asset_type": {
              "type": "string",
              "const": "image"
            },
            "required": {
              "type": "boolean",
              "const": true
            }
          }
        },
        {
          "type": "object",
          "properties": {
            "asset_id": {
              "type": "string",
              "const": "carousel_title"
            },
            "asset_type": {
              "type": "string",
              "const": "text"
            },
            "text_type": {
              "type": "string",
              "const": "headline"
            },
            "max_length": {
              "type": "integer",
              "const": 50
            }
          }
        }
      ]
    },
    "interaction_features": {
      "type": "object",
      "properties": {
        "navigation": {
          "type": "string",
          "enum": ["swipe", "arrows", "dots"],
          "default": "swipe"
        },
        "auto_scroll": {
          "type": "boolean",
          "const": false
        },
        "add_to_cart": {
          "type": "boolean",
          "const": true,
          "description": "Direct add-to-cart functionality"
        }
      }
    }
  },
  "required": ["format_id", "type", "category", "is_3p_served", "min_products", "max_products", "product_schema"],
  "additionalProperties": false
}