{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/media-buy/build-creative-request.json",
  "title": "Build Creative Request",
  "description": "Request to transform or generate a creative manifest. Takes a source manifest (which may be minimal for pure generation) and produces a target manifest in the specified format.",
  "type": "object",
  "properties": {
    "message": {
      "type": "string",
      "description": "Natural language instructions for the transformation or generation. For pure generation, this is the creative brief. For transformation, this provides guidance on how to adapt the creative. For refinement, this describes the desired changes."
    },
    "creative_manifest": {
      "$ref": "/schemas/core/creative-manifest.json",
      "description": "Creative manifest to transform or generate from. For pure generation, this should include the target format_id and any required input assets. For transformation (e.g., resizing, reformatting), this is the complete creative to adapt."
    },
    "target_format_id": {
      "$ref": "/schemas/core/format-id.json",
      "description": "Format ID to generate. The format definition specifies required input assets and output structure."
    },
    "brand": {
      "$ref": "/schemas/core/brand-ref.json",
      "description": "Brand reference for creative generation. Resolved to full brand identity (colors, logos, tone) at execution time."
    },
    "quality": {
      "$ref": "/schemas/enums/creative-quality.json",
      "description": "Quality tier for generation. 'draft' produces fast, lower-fidelity output for iteration and review. 'production' produces full-quality output for final delivery. If omitted, the creative agent uses its own default. For non-generative transforms (e.g., format resizing), creative agents MAY ignore this field."
    },
    "item_limit": {
      "type": "integer",
      "minimum": 1,
      "description": "Maximum number of catalog items to use when generating. When a catalog asset contains more items than this limit, the creative agent selects the top items based on relevance or catalog ordering. Ignored when the manifest contains no catalog assets. Distinct from the format-level max_items in catalog requirements, which is a hard cap on what the format can render."
    },
    "context": {
      "$ref": "/schemas/core/context.json"
    },
    "ext": {
      "$ref": "/schemas/core/ext.json"
    }
  },
  "required": [
    "target_format_id"
  ],
  "additionalProperties": true
}
