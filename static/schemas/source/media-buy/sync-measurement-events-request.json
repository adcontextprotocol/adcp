{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/media-buy/sync-measurement-events-request.json",
  "title": "Sync Measurement Events Request",
  "description": "Request parameters for configuring measurement IDs on an account with upsert semantics. Existing measurement IDs matched by measurement_id are updated, new ones are created. When delete_missing is true, measurement IDs on the account not in this request are removed. The response includes both synced and platform-managed measurement IDs for full visibility.",
  "type": "object",
  "properties": {
    "account_id": {
      "type": "string",
      "description": "Account to configure measurement IDs for"
    },
    "measurements": {
      "type": "array",
      "description": "Measurement IDs to sync (create or update)",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "measurement_id": {
            "type": "string",
            "description": "Unique identifier for this measurement ID"
          },
          "name": {
            "type": "string",
            "description": "Human-readable name for this measurement ID"
          },
          "event_types": {
            "type": "array",
            "description": "Event types this measurement ID handles (e.g. purchase, lead). If omitted, accepts all event types.",
            "items": {
              "$ref": "/schemas/enums/event-type.json"
            }
          },
          "allowed_domains": {
            "type": "array",
            "description": "Domains authorized to send events for this measurement ID",
            "items": {
              "type": "string"
            }
          }
        },
        "required": ["measurement_id"],
        "additionalProperties": true
      }
    },
    "delete_missing": {
      "type": "boolean",
      "default": false,
      "description": "When true, measurement IDs not included in this sync will be removed"
    },
    "context": {
      "$ref": "/schemas/core/context.json"
    },
    "ext": {
      "$ref": "/schemas/core/ext.json"
    }
  },
  "required": ["account_id", "measurements"],
  "additionalProperties": true
}
