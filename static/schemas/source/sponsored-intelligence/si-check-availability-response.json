{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/sponsored-intelligence/si-check-availability-response.json",
  "title": "SI Check Availability Response",
  "description": "Brand agent's response to availability check with token for session correlation",
  "type": "object",
  "properties": {
    "available": {
      "type": "boolean",
      "description": "Whether the offer/product is currently available"
    },
    "availability_token": {
      "type": "string",
      "description": "Token to pass to si_initiate_session for correlation"
    },
    "ttl_seconds": {
      "type": "integer",
      "minimum": 0,
      "description": "How long this availability check is valid (seconds)"
    },
    "checked_at": {
      "type": "string",
      "format": "date-time",
      "description": "When this availability was checked"
    },
    "offer_details": {
      "type": "object",
      "description": "Optional details about the offer if available",
      "properties": {
        "title": {
          "type": "string",
          "description": "Offer title"
        },
        "summary": {
          "type": "string",
          "description": "Brief summary of the offer"
        },
        "expires_at": {
          "type": "string",
          "format": "date-time",
          "description": "When this offer expires"
        },
        "price_hint": {
          "type": "string",
          "description": "Price indication (e.g., 'from $199')"
        }
      },
      "additionalProperties": true
    },
    "unavailable_reason": {
      "type": "string",
      "description": "If not available, why (e.g., 'sold_out', 'expired', 'region_restricted')"
    },
    "alternative_offer_ids": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Alternative offers to check if this one is unavailable"
    },
    "errors": {
      "type": "array",
      "items": {
        "$ref": "/schemas/core/error.json"
      },
      "description": "Errors during availability check"
    },
    "ext": {
      "$ref": "/schemas/core/ext.json"
    }
  },
  "required": ["available"],
  "additionalProperties": true
}
