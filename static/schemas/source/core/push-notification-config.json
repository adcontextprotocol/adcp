{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/core/push-notification-config.json",
  "title": "Push Notification Config",
  "description": "Webhook configuration for asynchronous task notifications. Fully adopts A2A Protocol's PushNotificationConfig structure (A2A Specification Section 4.3.1). ADCP requires authentication for security (A2A makes it optional). Supports Bearer tokens (simple) or HMAC signatures (production-recommended).",
  "type": "object",
  "properties": {
    "url": {
      "type": "string",
      "format": "uri",
      "description": "Webhook endpoint URL for task status notifications"
    },
    "token": {
      "type": "string",
      "description": "Optional client-provided token for webhook validation. Echoed back in webhook payload to validate request authenticity.",
      "minLength": 16
    },
    "authentication": {
      "type": "object",
      "description": "Authentication configuration for webhook delivery (A2A-compatible)",
      "properties": {
        "schemes": {
          "type": "array",
          "description": "Array of authentication schemes. Supported: ['Bearer'] for simple token auth, ['HMAC-SHA256'] for signature verification (recommended for production)",
          "items": {
            "$ref": "/schemas/enums/auth-scheme.json"
          },
          "minItems": 1,
          "maxItems": 1
        },
        "credentials": {
          "type": "string",
          "description": "Credentials for authentication. For Bearer: token sent in Authorization header. For HMAC-SHA256: shared secret used to generate signature. Minimum 32 characters. Exchanged out-of-band during onboarding.",
          "minLength": 32
        }
      },
      "required": ["schemes", "credentials"],
      "additionalProperties": false
    }
  },
  "required": ["url", "authentication"],
  "additionalProperties": false,
  "notes": [
    "This structure fully adopts A2A Protocol's PushNotificationConfig (A2A Specification Section 4.3.1)",
    "The push notification payload sent to this URL follows A2A's push notification payload structure (Section 4.3.3)",
    "See webhook-payload.json schema for the payload structure that will be sent to this URL"
  ]
}
