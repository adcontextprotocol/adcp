{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/core/promoted-offerings.json",
  "title": "Promoted Offerings",
  "description": "Complete offering specification combining brand reference, a catalog of promotable items, and optional SI agent endpoint. Provides all context needed for creative generation and/or conversational experiences about what is being promoted. The catalog field sources items from inline definitions, an external URL, or a platform-synced product catalog.",
  "type": "object",
  "properties": {
    "brand": {
      "$ref": "/schemas/core/brand-ref.json",
      "description": "Brand reference. Resolved to full brand identity (logos, colors, tone, assets) at execution time for creative generation."
    },
    "si_agent_url": {
      "type": "string",
      "format": "uri",
      "description": "MCP endpoint URL for the brand's SI agent. When present, hosts can connect users to conversational experiences about any of the catalog items. The agent handles si_get_offering lookups and full conversations."
    },
    "catalog": {
      "$ref": "/schemas/core/catalog.json",
      "description": "Catalog of items to promote. For offerings-type catalogs, items are AdCP Offering objects (campaigns, vacancies, events, services) provided inline or fetched from a URL. For product-type catalogs, items are selected from a platform-synced brand product catalog using selectors."
    },
    "asset_selectors": {
      "type": "object",
      "description": "Selectors to choose specific assets from the brand's asset library",
      "properties": {
        "tags": {
          "type": "array",
          "description": "Select assets with specific tags (e.g., ['holiday', 'premium'])",
          "items": {
            "type": "string"
          }
        },
        "asset_types": {
          "type": "array",
          "description": "Filter by asset type (e.g., ['image', 'video'])",
          "items": {
            "type": "string",
            "enum": [
              "image",
              "video",
              "audio",
              "vast",
              "daast",
              "text",
              "url",
              "html",
              "css",
              "javascript",
              "webhook"
            ]
          }
        },
        "exclude_tags": {
          "type": "array",
          "description": "Exclude assets with these tags",
          "items": {
            "type": "string"
          }
        }
      },
      "additionalProperties": true
    }
  },
  "required": [
    "brand"
  ],
  "additionalProperties": true,
  "examples": [
    {
      "description": "Inline offerings catalog with SI",
      "data": {
        "brand": {
          "domain": "acmecorp.com"
        },
        "si_agent_url": "https://agent.acmecorp.com/mcp",
        "catalog": {
          "type": "offerings",
          "items": [
            {
              "offering_id": "q1-2025-trial",
              "name": "Free 30-day trial",
              "description": "Try our platform free for 30 days",
              "valid_from": "2025-01-01T00:00:00Z",
              "valid_to": "2025-03-31T23:59:59Z",
              "checkout_url": "https://acmecorp.com/signup"
            },
            {
              "offering_id": "standard-product",
              "name": "Enterprise Platform",
              "description": "Our flagship enterprise solution",
              "landing_url": "https://acmecorp.com/enterprise"
            }
          ]
        }
      }
    },
    {
      "description": "External offerings catalog with ID filter",
      "data": {
        "brand": {
          "domain": "acme-restaurants.com"
        },
        "catalog": {
          "type": "offerings",
          "url": "https://acme-restaurants.com/vacancies.json",
          "ids": ["vacancy-amsterdam-42", "vacancy-rotterdam-17"]
        }
      }
    },
    {
      "description": "Product catalog with SKU selection (retail media)",
      "data": {
        "brand": {
          "domain": "acmecorp.com"
        },
        "catalog": {
          "type": "product",
          "ids": ["SKU-123", "SKU-456"]
        },
        "asset_selectors": {
          "tags": ["holiday"],
          "asset_types": ["image", "video"]
        }
      }
    },
    {
      "description": "Offerings with creatives and SI",
      "data": {
        "brand": {
          "domain": "pg.com",
          "brand_id": "tide"
        },
        "si_agent_url": "https://agent.tide.com/mcp",
        "catalog": {
          "type": "offerings",
          "items": [
            {
              "offering_id": "summer-campaign",
              "name": "Summer Sale",
              "description": "Up to 50% off summer collection",
              "landing_url": "https://tide.com/summer",
              "portfolio_ref": "https://tide.com/portfolios/summer-2025.json"
            }
          ]
        }
      }
    }
  ]
}
