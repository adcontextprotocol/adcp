{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/core/package.json",
  "title": "Package",
  "description": "A specific product within a media buy (line item)",
  "type": "object",
  "properties": {
    "package_id": {
      "type": "string",
      "description": "Publisher's unique identifier for the package"
    },
    "buyer_ref": {
      "type": "string",
      "description": "Buyer's reference identifier for this package"
    },
    "product_id": {
      "type": "string",
      "description": "ID of the product this package is based on"
    },
    "budget": {
      "type": "number",
      "description": "Budget allocation for this package in the currency specified by the pricing option",
      "minimum": 0
    },
    "pacing": {
      "$ref": "/schemas/enums/pacing.json"
    },
    "pricing_option_id": {
      "type": "string",
      "description": "ID of the selected pricing option from the product's pricing_options array"
    },
    "bid_price": {
      "type": "number",
      "description": "Bid price for auction-based CPM pricing (present if using cpm-auction-option)",
      "minimum": 0
    },
    "impressions": {
      "type": "number",
      "description": "Impression goal for this package",
      "minimum": 0
    },
    "targeting_overlay": {
      "$ref": "/schemas/core/targeting.json"
    },
    "creative_assignments": {
      "type": "array",
      "description": "Creative assets assigned to this package",
      "items": {
        "$ref": "/schemas/core/creative-assignment.json"
      }
    },
    "format_ids_to_provide": {
      "type": "array",
      "description": "Format IDs that creative assets will be provided for this package",
      "items": {
        "$ref": "/schemas/core/format-id.json"
      }
    },
    "optimization_goal": {
      "type": "object",
      "description": "Conversion optimization goal for this package. Tells the seller which event source and event type to optimize delivery against. Provide at most one of target_roas or target_cpa. If neither is provided, the platform optimizes for maximum conversions within budget.",
      "properties": {
        "event_source_id": {
          "type": "string",
          "description": "Event source to optimize against (must be configured on this account via sync_event_sources)"
        },
        "event_type": {
          "$ref": "/schemas/enums/event-type.json",
          "description": "Event type to optimize for (e.g. purchase, lead)"
        },
        "target_roas": {
          "type": "number",
          "description": "Target return on ad spend (e.g. 4.0 = $4 conversion value per $1 spent). Mutually exclusive with target_cpa.",
          "minimum": 0
        },
        "target_cpa": {
          "type": "number",
          "description": "Target cost per acquisition in the buy currency. Mutually exclusive with target_roas.",
          "minimum": 0
        }
      },
      "required": ["event_source_id", "event_type"],
      "additionalProperties": true
    },
    "paused": {
      "type": "boolean",
      "description": "Whether this package is paused by the buyer. Paused packages do not deliver impressions. Defaults to false.",
      "default": false
    },
    "ext": {
      "$ref": "/schemas/core/ext.json"
    }
  },
  "required": [
    "package_id"
  ],
  "additionalProperties": true
}
