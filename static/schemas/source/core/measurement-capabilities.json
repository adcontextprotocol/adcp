{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/core/measurement-capabilities.json",
  "title": "Measurement Capabilities",
  "description": "Capabilities declared by a measurement agent in get_adcp_capabilities. Describes two independent capability scopes: campaign measurement (per media buy) and channel measurement (MMM/portfolio-level).",
  "type": "object",
  "properties": {
    "campaign_measurement": {
      "type": "object",
      "description": "Campaign-level measurement capabilities — measures specific media buys using incrementality tests, MTA, or lift studies",
      "properties": {
        "methodologies": {
          "type": "array",
          "description": "Methodology types supported for campaign measurement",
          "items": {
            "$ref": "/schemas/enums/measurement-methodology.json"
          },
          "uniqueItems": true,
          "minItems": 1
        },
        "metric_types": {
          "type": "array",
          "description": "Metric types this agent can produce for campaign measurement",
          "items": {
            "$ref": "/schemas/enums/measurement-metric-type.json"
          },
          "uniqueItems": true
        },
        "supported_channels": {
          "type": "array",
          "description": "Advertising channels this agent can measure at campaign level",
          "items": {
            "$ref": "/schemas/enums/channels.json"
          },
          "uniqueItems": true
        }
      },
      "required": ["methodologies", "metric_types"],
      "additionalProperties": true
    },
    "channel_measurement": {
      "type": "object",
      "description": "Channel-level measurement capabilities — MMM/marketing mix modeling across the marketing portfolio",
      "properties": {
        "methodologies": {
          "type": "array",
          "description": "Methodology types supported for channel measurement",
          "items": {
            "$ref": "/schemas/enums/measurement-methodology.json"
          },
          "uniqueItems": true,
          "minItems": 1
        },
        "metric_types": {
          "type": "array",
          "description": "Metric types this agent can produce for channel measurement",
          "items": {
            "$ref": "/schemas/enums/measurement-metric-type.json"
          },
          "uniqueItems": true
        },
        "supported_channels": {
          "type": "array",
          "description": "Advertising channels this agent can model",
          "items": {
            "$ref": "/schemas/enums/channels.json"
          },
          "uniqueItems": true
        },
        "minimum_history_weeks": {
          "type": "integer",
          "minimum": 1,
          "description": "Minimum weeks of historical data required (e.g., 104 for Meridian's 2-year recommendation)",
          "examples": [52, 104]
        },
        "maximum_channels": {
          "type": "integer",
          "minimum": 1,
          "description": "Maximum number of channels that can be modeled simultaneously",
          "examples": [20]
        }
      },
      "required": ["methodologies", "metric_types"],
      "additionalProperties": true
    },
    "data_transports": {
      "type": "array",
      "description": "Supported data transport types for exposure data delivery",
      "items": {
        "$ref": "/schemas/enums/data-transport-type.json"
      },
      "uniqueItems": true
    },
    "results_delivery": {
      "type": "array",
      "description": "Supported results delivery mechanisms",
      "items": {
        "type": "string",
        "enum": ["webhook", "polling"]
      },
      "uniqueItems": true
    },
    "reporting_cadence": {
      "type": "array",
      "description": "Supported reporting cadences",
      "items": {
        "$ref": "/schemas/enums/measurement-reporting-cadence.json"
      },
      "uniqueItems": true
    }
  },
  "additionalProperties": true
}
