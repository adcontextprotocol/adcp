{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-beta.1/bundled/media-buy/get-products-response.json",
  "title": "Get Products Response",
  "description": "Response payload for get_products task",
  "type": "object",
  "properties": {
    "products": {
      "type": "array",
      "description": "Array of matching products",
      "items": {
        "title": "Product",
        "description": "Represents available advertising inventory",
        "type": "object",
        "properties": {
          "product_id": {
            "type": "string",
            "description": "Unique identifier for the product"
          },
          "name": {
            "type": "string",
            "description": "Human-readable product name"
          },
          "description": {
            "type": "string",
            "description": "Detailed description of the product and its inventory"
          },
          "publisher_properties": {
            "type": "array",
            "description": "Publisher properties covered by this product. Buyers fetch actual property definitions from each publisher's adagents.json and validate agent authorization. Selection patterns mirror the authorization patterns in adagents.json for consistency.",
            "items": {
              "title": "Publisher Property Selector",
              "description": "Selects properties from a publisher's adagents.json. Used for both product definitions and agent authorization. Supports three selection patterns: all properties, specific IDs, or by tags.",
              "discriminator": {
                "propertyName": "selection_type"
              },
              "oneOf": [
                {
                  "type": "object",
                  "description": "Select all properties from the publisher domain",
                  "properties": {
                    "publisher_domain": {
                      "type": "string",
                      "description": "Domain where publisher's adagents.json is hosted (e.g., 'cnn.com')",
                      "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                    },
                    "selection_type": {
                      "type": "string",
                      "const": "all",
                      "description": "Discriminator indicating all properties from this publisher are included"
                    }
                  },
                  "required": [
                    "publisher_domain",
                    "selection_type"
                  ],
                  "additionalProperties": true
                },
                {
                  "type": "object",
                  "description": "Select specific properties by ID",
                  "properties": {
                    "publisher_domain": {
                      "type": "string",
                      "description": "Domain where publisher's adagents.json is hosted (e.g., 'cnn.com')",
                      "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                    },
                    "selection_type": {
                      "type": "string",
                      "const": "by_id",
                      "description": "Discriminator indicating selection by specific property IDs"
                    },
                    "property_ids": {
                      "type": "array",
                      "description": "Specific property IDs from the publisher's adagents.json",
                      "items": {
                        "title": "Property ID",
                        "description": "Identifier for a publisher property. Must be lowercase alphanumeric with underscores only.",
                        "type": "string",
                        "pattern": "^[a-z0-9_]+$",
                        "examples": [
                          "cnn_ctv_app",
                          "homepage",
                          "mobile_ios",
                          "instagram"
                        ]
                      },
                      "minItems": 1
                    }
                  },
                  "required": [
                    "publisher_domain",
                    "selection_type",
                    "property_ids"
                  ],
                  "additionalProperties": true
                },
                {
                  "type": "object",
                  "description": "Select properties by tag membership",
                  "properties": {
                    "publisher_domain": {
                      "type": "string",
                      "description": "Domain where publisher's adagents.json is hosted (e.g., 'cnn.com')",
                      "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                    },
                    "selection_type": {
                      "type": "string",
                      "const": "by_tag",
                      "description": "Discriminator indicating selection by property tags"
                    },
                    "property_tags": {
                      "type": "array",
                      "description": "Property tags from the publisher's adagents.json. Selector covers all properties with these tags",
                      "items": {
                        "title": "Property Tag",
                        "description": "Tag for categorizing publisher properties. Must be lowercase alphanumeric with underscores only.",
                        "type": "string",
                        "pattern": "^[a-z0-9_]+$",
                        "examples": [
                          "ctv",
                          "premium",
                          "news",
                          "sports",
                          "meta_network",
                          "social_media"
                        ]
                      },
                      "minItems": 1
                    }
                  },
                  "required": [
                    "publisher_domain",
                    "selection_type",
                    "property_tags"
                  ],
                  "additionalProperties": true
                }
              ]
            },
            "minItems": 1
          },
          "format_ids": {
            "type": "array",
            "description": "Array of supported creative format IDs - structured format_id objects with agent_url and id",
            "items": {
              "title": "Format ID",
              "description": "Structured format identifier with agent URL and format name. Can reference: (1) a concrete format with fixed dimensions (id only), (2) a template format without parameters (id only), or (3) a template format with parameters (id + dimensions/duration). Template formats accept parameters in format_id while concrete formats have fixed dimensions in their definition. Parameterized format IDs create unique, specific format variants.",
              "type": "object",
              "properties": {
                "agent_url": {
                  "type": "string",
                  "format": "uri",
                  "description": "URL of the agent that defines this format (e.g., 'https://creatives.adcontextprotocol.org' for standard formats, or 'https://publisher.com/.well-known/adcp/sales' for custom formats)"
                },
                "id": {
                  "type": "string",
                  "pattern": "^[a-zA-Z0-9_-]+$",
                  "description": "Format identifier within the agent's namespace (e.g., 'display_static', 'video_hosted', 'audio_standard'). When used alone, references a template format. When combined with dimension/duration fields, creates a parameterized format ID for a specific variant."
                },
                "width": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "Width in pixels for visual formats. When specified, height must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                },
                "height": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "Height in pixels for visual formats. When specified, width must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                },
                "duration_ms": {
                  "type": "number",
                  "minimum": 1,
                  "description": "Duration in milliseconds for time-based formats (video, audio). When specified, creates a parameterized format ID. Omit to reference a template format without parameters."
                }
              },
              "required": [
                "agent_url",
                "id"
              ],
              "additionalProperties": true,
              "dependencies": {
                "width": [
                  "height"
                ],
                "height": [
                  "width"
                ]
              }
            }
          },
          "placements": {
            "type": "array",
            "description": "Optional array of specific placements within this product. When provided, buyers can target specific placements when assigning creatives.",
            "items": {
              "title": "Placement",
              "description": "Represents a specific ad placement within a product's inventory",
              "type": "object",
              "properties": {
                "placement_id": {
                  "type": "string",
                  "description": "Unique identifier for the placement within the product"
                },
                "name": {
                  "type": "string",
                  "description": "Human-readable name for the placement (e.g., 'Homepage Banner', 'Article Sidebar')"
                },
                "description": {
                  "type": "string",
                  "description": "Detailed description of where and how the placement appears"
                },
                "format_ids": {
                  "type": "array",
                  "description": "Format IDs supported by this specific placement. Can include: (1) concrete format_ids (fixed dimensions), (2) template format_ids without parameters (accepts any dimensions/duration), or (3) parameterized format_ids (specific dimension/duration constraints).",
                  "items": {
                    "title": "Format ID",
                    "description": "Structured format identifier with agent URL and format name. Can reference: (1) a concrete format with fixed dimensions (id only), (2) a template format without parameters (id only), or (3) a template format with parameters (id + dimensions/duration). Template formats accept parameters in format_id while concrete formats have fixed dimensions in their definition. Parameterized format IDs create unique, specific format variants.",
                    "type": "object",
                    "properties": {
                      "agent_url": {
                        "type": "string",
                        "format": "uri",
                        "description": "URL of the agent that defines this format (e.g., 'https://creatives.adcontextprotocol.org' for standard formats, or 'https://publisher.com/.well-known/adcp/sales' for custom formats)"
                      },
                      "id": {
                        "type": "string",
                        "pattern": "^[a-zA-Z0-9_-]+$",
                        "description": "Format identifier within the agent's namespace (e.g., 'display_static', 'video_hosted', 'audio_standard'). When used alone, references a template format. When combined with dimension/duration fields, creates a parameterized format ID for a specific variant."
                      },
                      "width": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "Width in pixels for visual formats. When specified, height must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                      },
                      "height": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "Height in pixels for visual formats. When specified, width must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                      },
                      "duration_ms": {
                        "type": "number",
                        "minimum": 1,
                        "description": "Duration in milliseconds for time-based formats (video, audio). When specified, creates a parameterized format ID. Omit to reference a template format without parameters."
                      }
                    },
                    "required": [
                      "agent_url",
                      "id"
                    ],
                    "additionalProperties": true,
                    "dependencies": {
                      "width": [
                        "height"
                      ],
                      "height": [
                        "width"
                      ]
                    }
                  },
                  "minItems": 1
                }
              },
              "required": [
                "placement_id",
                "name"
              ],
              "additionalProperties": true
            },
            "minItems": 1
          },
          "delivery_type": {
            "title": "Delivery Type",
            "description": "Type of inventory delivery",
            "type": "string",
            "enum": [
              "guaranteed",
              "non_guaranteed"
            ],
            "enumDescriptions": {
              "guaranteed": "Reserved inventory with guaranteed delivery",
              "non_guaranteed": "Auction-based inventory without delivery guarantees"
            }
          },
          "pricing_options": {
            "type": "array",
            "description": "Available pricing models for this product",
            "items": {
              "title": "Pricing Option",
              "description": "A pricing model option offered by a publisher for a product. Discriminated by pricing_model field. If fixed_price is present, it's fixed pricing. If absent, it's auction-based (floor_price and price_guidance optional).",
              "oneOf": [
                {
                  "title": "CPM Pricing Option",
                  "description": "Cost Per Mille (cost per 1,000 impressions) pricing. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "cpm",
                      "description": "Cost per 1,000 impressions"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Fixed price per unit. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile winning price",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median winning price",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile winning price",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile winning price",
                          "minimum": 0
                        }
                      }
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency"
                  ],
                  "additionalProperties": true
                },
                {
                  "title": "vCPM Pricing Option",
                  "description": "Viewable Cost Per Mille (cost per 1,000 viewable impressions) pricing - MRC viewability standard. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "vcpm",
                      "description": "Cost per 1,000 viewable impressions (MRC standard)"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Fixed price per unit. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median of recent winning bids",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile of recent winning bids",
                          "minimum": 0
                        }
                      }
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency"
                  ],
                  "additionalProperties": true
                },
                {
                  "title": "CPC Pricing Option",
                  "description": "Cost Per Click pricing. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "cpc",
                      "description": "Cost per click"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Fixed price per click. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median of recent winning bids",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile of recent winning bids",
                          "minimum": 0
                        }
                      }
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency"
                  ],
                  "additionalProperties": true
                },
                {
                  "title": "CPCV Pricing Option",
                  "description": "Cost Per Completed View (100% video/audio completion) pricing. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "cpcv",
                      "description": "Cost per completed view (100% completion)"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Fixed price per completed view. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median of recent winning bids",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile of recent winning bids",
                          "minimum": 0
                        }
                      }
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency"
                  ],
                  "additionalProperties": true
                },
                {
                  "title": "CPV Pricing Option",
                  "description": "Cost Per View (at publisher-defined threshold) pricing for video/audio. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "cpv",
                      "description": "Cost per view at threshold"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Fixed price per view. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median of recent winning bids",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile of recent winning bids",
                          "minimum": 0
                        }
                      }
                    },
                    "parameters": {
                      "type": "object",
                      "description": "CPV-specific parameters defining the view threshold",
                      "properties": {
                        "view_threshold": {
                          "oneOf": [
                            {
                              "type": "number",
                              "description": "Percentage completion threshold (0.0 to 1.0, e.g., 0.5 = 50%)",
                              "minimum": 0,
                              "maximum": 1
                            },
                            {
                              "type": "object",
                              "description": "Time-based view threshold",
                              "properties": {
                                "duration_seconds": {
                                  "type": "integer",
                                  "description": "Seconds of viewing required",
                                  "minimum": 1
                                }
                              },
                              "required": [
                                "duration_seconds"
                              ],
                              "additionalProperties": true
                            }
                          ]
                        }
                      },
                      "required": [
                        "view_threshold"
                      ],
                      "additionalProperties": true
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency",
                    "parameters"
                  ],
                  "additionalProperties": true
                },
                {
                  "title": "CPP Pricing Option",
                  "description": "Cost Per Point (Gross Rating Point) pricing for TV and audio campaigns. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "cpp",
                      "description": "Cost per Gross Rating Point"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Fixed price per rating point. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median of recent winning bids",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile of recent winning bids",
                          "minimum": 0
                        }
                      }
                    },
                    "parameters": {
                      "type": "object",
                      "description": "CPP-specific parameters for demographic targeting",
                      "properties": {
                        "demographic": {
                          "type": "string",
                          "pattern": "^[PMWAC][0-9]{2}(-[0-9]{2}|\\+)$",
                          "description": "Target demographic in Nielsen format (P18-49, M25-54, W35+, etc.)"
                        },
                        "min_points": {
                          "type": "number",
                          "description": "Minimum GRPs/TRPs required",
                          "minimum": 0
                        }
                      },
                      "required": [
                        "demographic"
                      ],
                      "additionalProperties": true
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency",
                    "parameters"
                  ],
                  "additionalProperties": true
                },
                {
                  "title": "Flat Rate Pricing Option",
                  "description": "Flat rate pricing for DOOH, sponsorships, and time-based campaigns. If fixed_price is present, it's fixed pricing. If absent, it's auction-based.",
                  "type": "object",
                  "properties": {
                    "pricing_option_id": {
                      "type": "string",
                      "description": "Unique identifier for this pricing option within the product"
                    },
                    "pricing_model": {
                      "type": "string",
                      "const": "flat_rate",
                      "description": "Fixed cost regardless of delivery volume"
                    },
                    "currency": {
                      "type": "string",
                      "description": "ISO 4217 currency code",
                      "pattern": "^[A-Z]{3}$",
                      "examples": [
                        "USD",
                        "EUR",
                        "GBP",
                        "JPY"
                      ]
                    },
                    "fixed_price": {
                      "type": "number",
                      "description": "Flat rate cost. If present, this is fixed pricing. If absent, auction-based.",
                      "minimum": 0
                    },
                    "floor_price": {
                      "type": "number",
                      "description": "Minimum acceptable bid for auction pricing (mutually exclusive with fixed_price). Bids below this value will be rejected.",
                      "minimum": 0
                    },
                    "price_guidance": {
                      "type": "object",
                      "description": "Optional pricing guidance for auction-based bidding. Helps buyers calibrate bids with historical percentiles.",
                      "properties": {
                        "p25": {
                          "type": "number",
                          "description": "25th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p50": {
                          "type": "number",
                          "description": "Median of recent winning bids",
                          "minimum": 0
                        },
                        "p75": {
                          "type": "number",
                          "description": "75th percentile of recent winning bids",
                          "minimum": 0
                        },
                        "p90": {
                          "type": "number",
                          "description": "90th percentile of recent winning bids",
                          "minimum": 0
                        }
                      }
                    },
                    "parameters": {
                      "type": "object",
                      "description": "Flat rate parameters for DOOH and time-based campaigns",
                      "properties": {
                        "duration_hours": {
                          "type": "number",
                          "description": "Duration in hours for time-based pricing",
                          "minimum": 0
                        },
                        "sov_percentage": {
                          "type": "number",
                          "description": "Guaranteed share of voice (0-100)",
                          "minimum": 0,
                          "maximum": 100
                        },
                        "loop_duration_seconds": {
                          "type": "integer",
                          "description": "Duration of ad loop rotation in seconds",
                          "minimum": 1
                        },
                        "min_plays_per_hour": {
                          "type": "integer",
                          "description": "Minimum plays per hour",
                          "minimum": 0
                        },
                        "venue_package": {
                          "type": "string",
                          "description": "Named venue package identifier"
                        },
                        "estimated_impressions": {
                          "type": "integer",
                          "description": "Estimated impressions (informational)",
                          "minimum": 0
                        },
                        "daypart": {
                          "type": "string",
                          "description": "Specific daypart for time-based pricing"
                        }
                      },
                      "additionalProperties": true
                    },
                    "min_spend_per_package": {
                      "type": "number",
                      "description": "Minimum spend requirement per package using this pricing option, in the specified currency",
                      "minimum": 0
                    }
                  },
                  "required": [
                    "pricing_option_id",
                    "pricing_model",
                    "currency"
                  ],
                  "additionalProperties": true
                }
              ]
            },
            "minItems": 1
          },
          "estimated_exposures": {
            "type": "integer",
            "description": "Estimated exposures/impressions for guaranteed products",
            "minimum": 0
          },
          "measurement": {
            "title": "Measurement",
            "description": "Measurement capabilities included with a product",
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "description": "Type of measurement",
                "examples": [
                  "incremental_sales_lift",
                  "brand_lift",
                  "foot_traffic"
                ]
              },
              "attribution": {
                "type": "string",
                "description": "Attribution methodology",
                "examples": [
                  "deterministic_purchase",
                  "probabilistic"
                ]
              },
              "window": {
                "type": "string",
                "description": "Attribution window",
                "examples": [
                  "30_days",
                  "7_days"
                ]
              },
              "reporting": {
                "type": "string",
                "description": "Reporting frequency and format",
                "examples": [
                  "weekly_dashboard",
                  "real_time_api"
                ]
              }
            },
            "required": [
              "type",
              "attribution",
              "reporting"
            ],
            "additionalProperties": true
          },
          "delivery_measurement": {
            "type": "object",
            "description": "Measurement provider and methodology for delivery metrics. The buyer accepts the declared provider as the source of truth for the buy. REQUIRED for all products.",
            "properties": {
              "provider": {
                "type": "string",
                "description": "Measurement provider(s) used for this product (e.g., 'Google Ad Manager with IAS viewability', 'Nielsen DAR', 'Geopath for DOOH impressions')"
              },
              "notes": {
                "type": "string",
                "description": "Additional details about measurement methodology in plain language (e.g., 'MRC-accredited viewability. 50% in-view for 1s display / 2s video', 'Panel-based demographic measurement updated monthly')"
              }
            },
            "required": [
              "provider"
            ]
          },
          "reporting_capabilities": {
            "title": "Reporting Capabilities",
            "description": "Reporting capabilities available for a product",
            "type": "object",
            "properties": {
              "available_reporting_frequencies": {
                "type": "array",
                "description": "Supported reporting frequency options",
                "items": {
                  "title": "Reporting Frequency",
                  "description": "Available frequencies for delivery reports and metrics updates",
                  "type": "string",
                  "enum": [
                    "hourly",
                    "daily",
                    "monthly"
                  ]
                },
                "minItems": 1,
                "uniqueItems": true
              },
              "expected_delay_minutes": {
                "type": "integer",
                "description": "Expected delay in minutes before reporting data becomes available (e.g., 240 for 4-hour delay)",
                "minimum": 0,
                "examples": [
                  240,
                  300,
                  1440
                ]
              },
              "timezone": {
                "type": "string",
                "description": "Timezone for reporting periods. Use 'UTC' or IANA timezone (e.g., 'America/New_York'). Critical for daily/monthly frequency alignment.",
                "examples": [
                  "UTC",
                  "America/New_York",
                  "Europe/London",
                  "America/Los_Angeles"
                ]
              },
              "supports_webhooks": {
                "type": "boolean",
                "description": "Whether this product supports webhook-based reporting notifications"
              },
              "available_metrics": {
                "type": "array",
                "description": "Metrics available in reporting. Impressions and spend are always implicitly included.",
                "items": {
                  "title": "Available Metric",
                  "description": "Standard delivery and performance metrics available for reporting",
                  "type": "string",
                  "enum": [
                    "impressions",
                    "spend",
                    "clicks",
                    "ctr",
                    "video_completions",
                    "completion_rate",
                    "conversions",
                    "viewability",
                    "engagement_rate"
                  ]
                },
                "uniqueItems": true,
                "examples": [
                  [
                    "impressions",
                    "spend",
                    "clicks",
                    "video_completions"
                  ],
                  [
                    "impressions",
                    "spend",
                    "conversions"
                  ]
                ]
              }
            },
            "required": [
              "available_reporting_frequencies",
              "expected_delay_minutes",
              "timezone",
              "supports_webhooks",
              "available_metrics"
            ],
            "additionalProperties": true
          },
          "creative_policy": {
            "title": "Creative Policy",
            "description": "Creative requirements and restrictions for a product",
            "type": "object",
            "properties": {
              "co_branding": {
                "title": "Co-Branding Requirement",
                "description": "Co-branding requirement",
                "type": "string",
                "enum": [
                  "required",
                  "optional",
                  "none"
                ]
              },
              "landing_page": {
                "title": "Landing Page Requirement",
                "description": "Landing page requirements",
                "type": "string",
                "enum": [
                  "any",
                  "retailer_site_only",
                  "must_include_retailer"
                ]
              },
              "templates_available": {
                "type": "boolean",
                "description": "Whether creative templates are provided"
              }
            },
            "required": [
              "co_branding",
              "landing_page",
              "templates_available"
            ],
            "additionalProperties": true
          },
          "is_custom": {
            "type": "boolean",
            "description": "Whether this is a custom product"
          },
          "brief_relevance": {
            "type": "string",
            "description": "Explanation of why this product matches the brief (only included when brief is provided)"
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "description": "Expiration timestamp for custom products"
          },
          "product_card": {
            "type": "object",
            "description": "Optional standard visual card (300x400px) for displaying this product in user interfaces. Can be rendered via preview_creative or pre-generated.",
            "properties": {
              "format_id": {
                "title": "Format ID",
                "description": "Creative format defining the card layout (typically product_card_standard)",
                "type": "object",
                "properties": {
                  "agent_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL of the agent that defines this format (e.g., 'https://creatives.adcontextprotocol.org' for standard formats, or 'https://publisher.com/.well-known/adcp/sales' for custom formats)"
                  },
                  "id": {
                    "type": "string",
                    "pattern": "^[a-zA-Z0-9_-]+$",
                    "description": "Format identifier within the agent's namespace (e.g., 'display_static', 'video_hosted', 'audio_standard'). When used alone, references a template format. When combined with dimension/duration fields, creates a parameterized format ID for a specific variant."
                  },
                  "width": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Width in pixels for visual formats. When specified, height must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                  },
                  "height": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Height in pixels for visual formats. When specified, width must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                  },
                  "duration_ms": {
                    "type": "number",
                    "minimum": 1,
                    "description": "Duration in milliseconds for time-based formats (video, audio). When specified, creates a parameterized format ID. Omit to reference a template format without parameters."
                  }
                },
                "required": [
                  "agent_url",
                  "id"
                ],
                "additionalProperties": true,
                "dependencies": {
                  "width": [
                    "height"
                  ],
                  "height": [
                    "width"
                  ]
                }
              },
              "manifest": {
                "type": "object",
                "description": "Asset manifest for rendering the card, structure defined by the format",
                "additionalProperties": true
              }
            },
            "required": [
              "format_id",
              "manifest"
            ],
            "additionalProperties": true
          },
          "product_card_detailed": {
            "type": "object",
            "description": "Optional detailed card with carousel and full specifications. Provides rich product presentation similar to media kit pages.",
            "properties": {
              "format_id": {
                "title": "Format ID",
                "description": "Creative format defining the detailed card layout (typically product_card_detailed)",
                "type": "object",
                "properties": {
                  "agent_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL of the agent that defines this format (e.g., 'https://creatives.adcontextprotocol.org' for standard formats, or 'https://publisher.com/.well-known/adcp/sales' for custom formats)"
                  },
                  "id": {
                    "type": "string",
                    "pattern": "^[a-zA-Z0-9_-]+$",
                    "description": "Format identifier within the agent's namespace (e.g., 'display_static', 'video_hosted', 'audio_standard'). When used alone, references a template format. When combined with dimension/duration fields, creates a parameterized format ID for a specific variant."
                  },
                  "width": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Width in pixels for visual formats. When specified, height must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                  },
                  "height": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "Height in pixels for visual formats. When specified, width must also be specified. Both fields together create a parameterized format ID for dimension-specific variants."
                  },
                  "duration_ms": {
                    "type": "number",
                    "minimum": 1,
                    "description": "Duration in milliseconds for time-based formats (video, audio). When specified, creates a parameterized format ID. Omit to reference a template format without parameters."
                  }
                },
                "required": [
                  "agent_url",
                  "id"
                ],
                "additionalProperties": true,
                "dependencies": {
                  "width": [
                    "height"
                  ],
                  "height": [
                    "width"
                  ]
                }
              },
              "manifest": {
                "type": "object",
                "description": "Asset manifest for rendering the detailed card, structure defined by the format",
                "additionalProperties": true
              }
            },
            "required": [
              "format_id",
              "manifest"
            ],
            "additionalProperties": true
          },
          "ext": {
            "title": "Extension Object",
            "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
            "type": "object",
            "additionalProperties": true
          }
        },
        "required": [
          "product_id",
          "name",
          "description",
          "publisher_properties",
          "format_ids",
          "delivery_type",
          "delivery_measurement",
          "pricing_options"
        ],
        "additionalProperties": true
      }
    },
    "proposals": {
      "type": "array",
      "description": "Optional array of proposed media plans with budget allocations across products. Publishers include proposals when they can provide strategic guidance based on the brief. Proposals are actionable - buyers can refine them via subsequent get_products calls or execute them directly via create_media_buy.",
      "items": {
        "title": "Proposal",
        "description": "A proposed media plan with budget allocations across products. Represents the publisher's strategic recommendation for how to structure a campaign based on the brief. Proposals are actionable - buyers can execute them directly via create_media_buy by providing the proposal_id.",
        "type": "object",
        "properties": {
          "proposal_id": {
            "type": "string",
            "description": "Unique identifier for this proposal. Used to refine the proposal in subsequent get_products calls or to execute it via create_media_buy."
          },
          "name": {
            "type": "string",
            "description": "Human-readable name for this media plan proposal"
          },
          "description": {
            "type": "string",
            "description": "Explanation of the proposal strategy and what it achieves"
          },
          "allocations": {
            "type": "array",
            "description": "Budget allocations across products. Allocation percentages MUST sum to 100. Publishers are responsible for ensuring the sum equals 100; buyers SHOULD validate this before execution.",
            "items": {
              "title": "Product Allocation",
              "description": "A budget allocation for a specific product within a proposal. Percentages across all allocations in a proposal should sum to 100.",
              "type": "object",
              "properties": {
                "product_id": {
                  "type": "string",
                  "description": "ID of the product (must reference a product in the products array)"
                },
                "allocation_percentage": {
                  "type": "number",
                  "description": "Percentage of total budget allocated to this product (0-100)",
                  "minimum": 0,
                  "maximum": 100
                },
                "pricing_option_id": {
                  "type": "string",
                  "description": "Recommended pricing option ID from the product's pricing_options array"
                },
                "rationale": {
                  "type": "string",
                  "description": "Explanation of why this product and allocation are recommended"
                },
                "sequence": {
                  "type": "integer",
                  "description": "Optional ordering hint for multi-line-item plans (1-based)",
                  "minimum": 1
                },
                "tags": {
                  "type": "array",
                  "description": "Categorical tags for this allocation (e.g., 'desktop', 'german', 'mobile') - useful for grouping/filtering allocations by dimension",
                  "items": {
                    "type": "string"
                  }
                },
                "ext": {
                  "title": "Extension Object",
                  "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "required": [
                "product_id",
                "allocation_percentage"
              ],
              "additionalProperties": true
            },
            "minItems": 1
          },
          "expires_at": {
            "type": "string",
            "format": "date-time",
            "description": "When this proposal expires and can no longer be executed. After expiration, referenced products or pricing may no longer be available."
          },
          "total_budget_guidance": {
            "type": "object",
            "description": "Optional budget guidance for this proposal",
            "properties": {
              "min": {
                "type": "number",
                "description": "Minimum recommended budget",
                "minimum": 0
              },
              "recommended": {
                "type": "number",
                "description": "Recommended budget for optimal performance",
                "minimum": 0
              },
              "max": {
                "type": "number",
                "description": "Maximum budget before diminishing returns",
                "minimum": 0
              },
              "currency": {
                "type": "string",
                "description": "ISO 4217 currency code"
              }
            },
            "additionalProperties": true
          },
          "brief_alignment": {
            "type": "string",
            "description": "Explanation of how this proposal aligns with the campaign brief"
          },
          "ext": {
            "title": "Extension Object",
            "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
            "type": "object",
            "additionalProperties": true
          }
        },
        "required": [
          "proposal_id",
          "name",
          "allocations"
        ],
        "additionalProperties": true
      }
    },
    "errors": {
      "type": "array",
      "description": "Task-specific errors and warnings (e.g., product filtering issues)",
      "items": {
        "title": "Error",
        "description": "Standard error structure for task-specific errors and warnings",
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "Error code for programmatic handling"
          },
          "message": {
            "type": "string",
            "description": "Human-readable error message"
          },
          "field": {
            "type": "string",
            "description": "Field path associated with the error (e.g., 'packages[0].targeting')"
          },
          "suggestion": {
            "type": "string",
            "description": "Suggested fix for the error"
          },
          "retry_after": {
            "type": "number",
            "description": "Seconds to wait before retrying the operation",
            "minimum": 0
          },
          "details": {
            "type": "object",
            "description": "Additional task-specific error details",
            "additionalProperties": true
          }
        },
        "required": [
          "code",
          "message"
        ],
        "additionalProperties": true
      }
    },
    "property_list_applied": {
      "type": "boolean",
      "description": "[AdCP 3.0] Indicates whether property_list filtering was applied. True if the agent filtered products based on the provided property_list. Absent or false if property_list was not provided or not supported by this agent."
    },
    "context": {
      "title": "Context Object",
      "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
      "type": "object",
      "additionalProperties": true
    },
    "ext": {
      "title": "Extension Object",
      "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
      "type": "object",
      "additionalProperties": true
    }
  },
  "required": [
    "products"
  ],
  "additionalProperties": true,
  "_bundled": {
    "generatedAt": "2026-01-26T12:55:43.197Z",
    "note": "This is a bundled schema with all $ref resolved inline. For the modular version with references, use the parent directory."
  }
}