{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-rc.1/bundled/media-buy/get-media-buy-delivery-request.json",
  "title": "Get Media Buy Delivery Request",
  "description": "Request parameters for retrieving comprehensive delivery metrics",
  "type": "object",
  "properties": {
    "account": {
      "title": "Account Reference",
      "description": "Filter delivery data to a specific account. When omitted, returns data across all accessible accounts.",
      "type": "object",
      "oneOf": [
        {
          "properties": {
            "account_id": {
              "type": "string",
              "description": "Seller-assigned account identifier (from sync_accounts or list_accounts)"
            }
          },
          "required": [
            "account_id"
          ],
          "additionalProperties": false
        },
        {
          "properties": {
            "brand": {
              "title": "Brand Reference",
              "description": "Brand reference identifying the advertiser",
              "type": "object",
              "properties": {
                "domain": {
                  "type": "string",
                  "description": "Domain where /.well-known/brand.json is hosted, or the brand's operating domain",
                  "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                },
                "brand_id": {
                  "title": "Brand ID",
                  "description": "Brand identifier within the house portfolio. Optional for single-brand domains.",
                  "type": "string",
                  "pattern": "^[a-z0-9_]+$",
                  "examples": [
                    "tide",
                    "cheerios",
                    "air_jordan",
                    "nike",
                    "pampers"
                  ]
                }
              },
              "required": [
                "domain"
              ],
              "additionalProperties": false,
              "examples": [
                {
                  "domain": "nova-brands.com",
                  "brand_id": "spark"
                },
                {
                  "domain": "nova-brands.com",
                  "brand_id": "glow"
                },
                {
                  "domain": "acme-corp.com"
                }
              ]
            },
            "operator": {
              "type": "string",
              "description": "Domain of the entity operating on the brand's behalf. When the brand operates directly, this is the brand's domain.",
              "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
            }
          },
          "required": [
            "brand",
            "operator"
          ],
          "additionalProperties": false
        }
      ],
      "examples": [
        {
          "account_id": "acc_acme_001"
        },
        {
          "brand": {
            "domain": "acme-corp.com"
          },
          "operator": "acme-corp.com"
        },
        {
          "brand": {
            "domain": "nova-brands.com",
            "brand_id": "spark"
          },
          "operator": "pinnacle-media.com"
        }
      ]
    },
    "media_buy_ids": {
      "type": "array",
      "description": "Array of publisher media buy IDs to get delivery data for",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "buyer_refs": {
      "type": "array",
      "description": "Array of buyer reference IDs to get delivery data for",
      "items": {
        "type": "string"
      },
      "minItems": 1
    },
    "status_filter": {
      "oneOf": [
        {
          "title": "Media Buy Status",
          "description": "Status of a media buy.",
          "type": "string",
          "enum": [
            "pending_activation",
            "active",
            "paused",
            "completed",
            "rejected",
            "canceled"
          ],
          "enumDescriptions": {
            "pending_activation": "Media buy created but not yet activated",
            "active": "Media buy is currently running",
            "paused": "Media buy is temporarily paused",
            "completed": "Media buy has finished running",
            "rejected": "Media buy was declined by the seller after creation",
            "canceled": "Media buy was terminated by the buyer before natural completion"
          }
        },
        {
          "type": "array",
          "items": {
            "title": "Media Buy Status",
            "description": "Status of a media buy.",
            "type": "string",
            "enum": [
              "pending_activation",
              "active",
              "paused",
              "completed",
              "rejected",
              "canceled"
            ],
            "enumDescriptions": {
              "pending_activation": "Media buy created but not yet activated",
              "active": "Media buy is currently running",
              "paused": "Media buy is temporarily paused",
              "completed": "Media buy has finished running",
              "rejected": "Media buy was declined by the seller after creation",
              "canceled": "Media buy was terminated by the buyer before natural completion"
            }
          },
          "minItems": 1
        }
      ],
      "description": "Filter by status. Can be a single status or array of statuses"
    },
    "start_date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Start date for reporting period (YYYY-MM-DD). When omitted along with end_date, returns campaign lifetime data. Only accepted when the product's reporting_capabilities.date_range_support is 'date_range'."
    },
    "end_date": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "End date for reporting period (YYYY-MM-DD). When omitted along with start_date, returns campaign lifetime data. Only accepted when the product's reporting_capabilities.date_range_support is 'date_range'."
    },
    "include_package_daily_breakdown": {
      "type": "boolean",
      "default": false,
      "description": "When true, include daily_breakdown arrays within each package in by_package. Useful for per-package pacing analysis and line-item monitoring. Omit or set false to reduce response size — package daily data can be large for multi-package buys over long flights."
    },
    "attribution_window": {
      "type": "object",
      "description": "Attribution window to apply for conversion metrics. When provided, the seller returns conversion data using the requested lookback windows instead of their platform default. The seller echoes the applied window in the response. Sellers that do not support configurable windows ignore this field and return their default. Check get_adcp_capabilities conversion_tracking.attribution_windows for available options.",
      "properties": {
        "post_click": {
          "allOf": [
            {
              "title": "Duration",
              "description": "A time duration expressed as an interval and unit. Used for frequency cap windows, attribution windows, reach optimization windows, and other time-based settings. When unit is 'campaign', interval must be 1 — the window spans the full campaign flight.",
              "type": "object",
              "properties": {
                "interval": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "Number of time units. Must be 1 when unit is 'campaign'."
                },
                "unit": {
                  "type": "string",
                  "enum": [
                    "minutes",
                    "hours",
                    "days",
                    "campaign"
                  ],
                  "description": "Time unit. 'campaign' spans the full campaign flight."
                }
              },
              "required": [
                "interval",
                "unit"
              ],
              "additionalProperties": false
            }
          ],
          "description": "Post-click attribution window to apply."
        },
        "post_view": {
          "allOf": [
            {
              "title": "Duration",
              "description": "A time duration expressed as an interval and unit. Used for frequency cap windows, attribution windows, reach optimization windows, and other time-based settings. When unit is 'campaign', interval must be 1 — the window spans the full campaign flight.",
              "type": "object",
              "properties": {
                "interval": {
                  "type": "integer",
                  "minimum": 1,
                  "description": "Number of time units. Must be 1 when unit is 'campaign'."
                },
                "unit": {
                  "type": "string",
                  "enum": [
                    "minutes",
                    "hours",
                    "days",
                    "campaign"
                  ],
                  "description": "Time unit. 'campaign' spans the full campaign flight."
                }
              },
              "required": [
                "interval",
                "unit"
              ],
              "additionalProperties": false
            }
          ],
          "description": "Post-view attribution window to apply."
        },
        "model": {
          "title": "Attribution Model",
          "description": "Attribution model to use. When omitted, the seller applies their default model.",
          "type": "string",
          "enum": [
            "last_touch",
            "first_touch",
            "linear",
            "time_decay",
            "data_driven"
          ]
        }
      },
      "additionalProperties": true
    },
    "reporting_dimensions": {
      "type": "object",
      "description": "Request dimensional breakdowns in delivery reporting. Each key enables a specific breakdown dimension within by_package — include as an empty object (e.g., \"device_type\": {}) to activate with defaults. Omit entirely for no breakdowns (backward compatible). Unsupported dimensions are silently omitted from the response. Note: keyword, catalog_item, and creative breakdowns are returned automatically when the seller supports them and are not controlled by this object.",
      "properties": {
        "geo": {
          "type": "object",
          "description": "Request geographic breakdown. Check reporting_capabilities.supports_geo_breakdown for available levels and systems.",
          "properties": {
            "geo_level": {
              "title": "Geographic Targeting Level",
              "description": "Geographic granularity level for the breakdown",
              "type": "string",
              "enum": [
                "country",
                "region",
                "metro",
                "postal_area"
              ]
            },
            "system": {
              "oneOf": [
                {
                  "title": "Metro Area System",
                  "description": "Metro area classification systems for geographic targeting",
                  "type": "string",
                  "enum": [
                    "nielsen_dma",
                    "uk_itl1",
                    "uk_itl2",
                    "eurostat_nuts2",
                    "custom"
                  ]
                },
                {
                  "title": "Postal Code System",
                  "description": "Postal code systems for geographic targeting. System names encode country and precision level.",
                  "type": "string",
                  "enum": [
                    "us_zip",
                    "us_zip_plus_four",
                    "gb_outward",
                    "gb_full",
                    "ca_fsa",
                    "ca_full",
                    "de_plz",
                    "fr_code_postal",
                    "au_postcode",
                    "ch_plz",
                    "at_plz"
                  ]
                }
              ],
              "description": "Classification system for metro or postal_area levels (e.g., 'nielsen_dma', 'us_zip'). Required when geo_level is 'metro' or 'postal_area'."
            },
            "limit": {
              "type": "integer",
              "minimum": 1,
              "default": 25,
              "description": "Maximum number of geo entries to return. Defaults to 25. When truncated, by_geo_truncated is true in the response."
            },
            "sort_by": {
              "title": "Sort Metric",
              "description": "Metric to sort breakdown rows by (descending). Falls back to 'spend' if the seller does not report the requested metric.",
              "type": "string",
              "enum": [
                "impressions",
                "spend",
                "clicks",
                "ctr",
                "views",
                "completed_views",
                "completion_rate",
                "conversions",
                "conversion_value",
                "roas",
                "cost_per_acquisition",
                "new_to_brand_rate",
                "leads",
                "grps",
                "reach",
                "frequency",
                "engagements",
                "follows",
                "saves",
                "profile_visits",
                "engagement_rate",
                "cost_per_click"
              ],
              "default": "spend"
            }
          },
          "required": [
            "geo_level"
          ],
          "additionalProperties": true
        },
        "device_type": {
          "type": "object",
          "description": "Request device type breakdown.",
          "properties": {
            "limit": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of entries to return. When omitted, all entries are returned (the enum is small and bounded)."
            },
            "sort_by": {
              "title": "Sort Metric",
              "description": "Metric to sort breakdown rows by (descending). Falls back to 'spend' if the seller does not report the requested metric.",
              "type": "string",
              "enum": [
                "impressions",
                "spend",
                "clicks",
                "ctr",
                "views",
                "completed_views",
                "completion_rate",
                "conversions",
                "conversion_value",
                "roas",
                "cost_per_acquisition",
                "new_to_brand_rate",
                "leads",
                "grps",
                "reach",
                "frequency",
                "engagements",
                "follows",
                "saves",
                "profile_visits",
                "engagement_rate",
                "cost_per_click"
              ],
              "default": "spend"
            }
          },
          "additionalProperties": true
        },
        "device_platform": {
          "type": "object",
          "description": "Request device platform breakdown.",
          "properties": {
            "limit": {
              "type": "integer",
              "minimum": 1,
              "description": "Maximum number of entries to return. When omitted, all entries are returned (the enum is small and bounded)."
            },
            "sort_by": {
              "title": "Sort Metric",
              "description": "Metric to sort breakdown rows by (descending). Falls back to 'spend' if the seller does not report the requested metric.",
              "type": "string",
              "enum": [
                "impressions",
                "spend",
                "clicks",
                "ctr",
                "views",
                "completed_views",
                "completion_rate",
                "conversions",
                "conversion_value",
                "roas",
                "cost_per_acquisition",
                "new_to_brand_rate",
                "leads",
                "grps",
                "reach",
                "frequency",
                "engagements",
                "follows",
                "saves",
                "profile_visits",
                "engagement_rate",
                "cost_per_click"
              ],
              "default": "spend"
            }
          },
          "additionalProperties": true
        },
        "audience": {
          "type": "object",
          "description": "Request audience segment breakdown.",
          "properties": {
            "limit": {
              "type": "integer",
              "minimum": 1,
              "default": 25,
              "description": "Maximum number of entries to return. Defaults to 25."
            },
            "sort_by": {
              "title": "Sort Metric",
              "description": "Metric to sort breakdown rows by (descending). Falls back to 'spend' if the seller does not report the requested metric.",
              "type": "string",
              "enum": [
                "impressions",
                "spend",
                "clicks",
                "ctr",
                "views",
                "completed_views",
                "completion_rate",
                "conversions",
                "conversion_value",
                "roas",
                "cost_per_acquisition",
                "new_to_brand_rate",
                "leads",
                "grps",
                "reach",
                "frequency",
                "engagements",
                "follows",
                "saves",
                "profile_visits",
                "engagement_rate",
                "cost_per_click"
              ],
              "default": "spend"
            }
          },
          "additionalProperties": true
        },
        "placement": {
          "type": "object",
          "description": "Request placement breakdown.",
          "properties": {
            "limit": {
              "type": "integer",
              "minimum": 1,
              "default": 25,
              "description": "Maximum number of entries to return. Defaults to 25."
            },
            "sort_by": {
              "title": "Sort Metric",
              "description": "Metric to sort breakdown rows by (descending). Falls back to 'spend' if the seller does not report the requested metric.",
              "type": "string",
              "enum": [
                "impressions",
                "spend",
                "clicks",
                "ctr",
                "views",
                "completed_views",
                "completion_rate",
                "conversions",
                "conversion_value",
                "roas",
                "cost_per_acquisition",
                "new_to_brand_rate",
                "leads",
                "grps",
                "reach",
                "frequency",
                "engagements",
                "follows",
                "saves",
                "profile_visits",
                "engagement_rate",
                "cost_per_click"
              ],
              "default": "spend"
            }
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "context": {
      "title": "Context Object",
      "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
      "type": "object",
      "additionalProperties": true
    },
    "ext": {
      "title": "Extension Object",
      "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
      "type": "object",
      "additionalProperties": true
    }
  },
  "additionalProperties": true,
  "_bundled": {
    "generatedAt": "2026-03-01T12:28:36.645Z",
    "note": "This is a bundled schema with all $ref resolved inline. For the modular version with references, use the parent directory."
  }
}