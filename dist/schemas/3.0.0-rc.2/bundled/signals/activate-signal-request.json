{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/3.0.0-rc.2/bundled/signals/activate-signal-request.json",
  "title": "Activate Signal Request",
  "description": "Request parameters for activating or deactivating a signal on deployment targets",
  "type": "object",
  "properties": {
    "action": {
      "type": "string",
      "enum": [
        "activate",
        "deactivate"
      ],
      "default": "activate",
      "description": "Whether to activate or deactivate the signal. Deactivating removes the segment from downstream platforms, required when campaigns end to comply with data governance policies (GDPR, CCPA). Defaults to 'activate' when omitted."
    },
    "signal_agent_segment_id": {
      "type": "string",
      "description": "The universal identifier for the signal to activate"
    },
    "destinations": {
      "type": "array",
      "description": "Target destination(s) for activation. If the authenticated caller matches one of these destinations, activation keys will be included in the response.",
      "items": {
        "title": "Destination",
        "description": "A deployment target where signals can be activated (DSP, sales agent, etc.)",
        "oneOf": [
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "platform",
                "description": "Discriminator indicating this is a platform-based deployment"
              },
              "platform": {
                "type": "string",
                "description": "Platform identifier for DSPs (e.g., 'the-trade-desk', 'amazon-dsp')"
              },
              "account": {
                "type": "string",
                "description": "Optional account identifier on the platform"
              }
            },
            "required": [
              "type",
              "platform"
            ],
            "additionalProperties": true
          },
          {
            "type": "object",
            "properties": {
              "type": {
                "const": "agent",
                "description": "Discriminator indicating this is an agent URL-based deployment"
              },
              "agent_url": {
                "type": "string",
                "format": "uri",
                "description": "URL identifying the deployment agent (for sales agents, etc.)"
              },
              "account": {
                "type": "string",
                "description": "Optional account identifier on the agent"
              }
            },
            "required": [
              "type",
              "agent_url"
            ],
            "additionalProperties": true
          }
        ]
      },
      "minItems": 1
    },
    "pricing_option_id": {
      "type": "string",
      "description": "The pricing option selected from the signal's pricing_options in the get_signals response. Required when the signal has pricing options. Records the buyer's pricing commitment at activation time; pass this same value in report_usage for billing verification."
    },
    "account": {
      "title": "Account Reference",
      "description": "Account for this activation. Associates with a commercial relationship established via sync_accounts.",
      "type": "object",
      "oneOf": [
        {
          "properties": {
            "account_id": {
              "type": "string",
              "description": "Seller-assigned account identifier (from sync_accounts or list_accounts)"
            }
          },
          "required": [
            "account_id"
          ],
          "additionalProperties": false
        },
        {
          "properties": {
            "brand": {
              "title": "Brand Reference",
              "description": "Brand reference identifying the advertiser",
              "type": "object",
              "properties": {
                "domain": {
                  "type": "string",
                  "description": "Domain where /.well-known/brand.json is hosted, or the brand's operating domain",
                  "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
                },
                "brand_id": {
                  "title": "Brand ID",
                  "description": "Brand identifier within the house portfolio. Optional for single-brand domains.",
                  "type": "string",
                  "pattern": "^[a-z0-9_]+$",
                  "examples": [
                    "tide",
                    "cheerios",
                    "air_jordan",
                    "nike",
                    "pampers"
                  ]
                }
              },
              "required": [
                "domain"
              ],
              "additionalProperties": false,
              "examples": [
                {
                  "domain": "nova-brands.com",
                  "brand_id": "spark"
                },
                {
                  "domain": "nova-brands.com",
                  "brand_id": "glow"
                },
                {
                  "domain": "acme-corp.com"
                }
              ]
            },
            "operator": {
              "type": "string",
              "description": "Domain of the entity operating on the brand's behalf. When the brand operates directly, this is the brand's domain.",
              "pattern": "^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$"
            }
          },
          "required": [
            "brand",
            "operator"
          ],
          "additionalProperties": false
        }
      ],
      "examples": [
        {
          "account_id": "acc_acme_001"
        },
        {
          "brand": {
            "domain": "acme-corp.com"
          },
          "operator": "acme-corp.com"
        },
        {
          "brand": {
            "domain": "nova-brands.com",
            "brand_id": "spark"
          },
          "operator": "pinnacle-media.com"
        }
      ]
    },
    "buyer_campaign_ref": {
      "type": "string",
      "description": "The buyer's campaign reference for this activation. Enables the signals agent to correlate activations with subsequent report_usage calls."
    },
    "context": {
      "title": "Context Object",
      "description": "Opaque correlation data that is echoed unchanged in responses. Used for internal tracking, UI session IDs, trace IDs, and other caller-specific identifiers that don't affect protocol behavior. Context data is never parsed by AdCP agents - it's simply preserved and returned.",
      "type": "object",
      "additionalProperties": true
    },
    "ext": {
      "title": "Extension Object",
      "description": "Extension object for platform-specific, vendor-namespaced parameters. Extensions are always optional and must be namespaced under a vendor/platform key (e.g., ext.gam, ext.roku). Used for custom capabilities, partner-specific configuration, and features being proposed for standardization.",
      "type": "object",
      "additionalProperties": true
    }
  },
  "required": [
    "signal_agent_segment_id",
    "destinations"
  ],
  "additionalProperties": true,
  "_bundled": {
    "generatedAt": "2026-03-01T20:14:16.679Z",
    "note": "This is a bundled schema with all $ref resolved inline. For the modular version with references, use the parent directory."
  }
}