#!/bin/sh

# Verify version sync before pushing
npm run verify-version-sync

# Validate Mintlify docs before pushing
# Production uses Mintlify, so we validate with Mintlify checks
echo "ğŸ” Validating Mintlify documentation..."

# Check for broken internal links
npx --yes mintlify@latest broken-links || {
  echo "âŒ Mintlify broken links check failed. Please fix broken links before pushing."
  exit 1
}

# Check for accessibility issues (warn only, don't fail)
npx --yes mintlify@latest a11y || {
  echo "âš ï¸  Mintlify accessibility check found issues. Review and fix if needed."
  # Don't fail on a11y warnings, just warn
}

echo "âœ… Mintlify documentation validation passed"
