<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Insights | AgenticAdvertising.org</title>
  <meta name="description" content="Thought leadership on agentic AI, open standards, and the future of advertising. Educational resources from AgenticAdvertising.org.">
  <link rel="icon" href="/AAo.svg" type="image/svg+xml">
  <link rel="stylesheet" href="/aao-theme.css">
  <style>
    /* Page-specific: nav offset */
    body { padding-top: 60px; }

    /* Page-specific: narrower container for insights listing */
    .container { max-width: 1000px; }

    /* Loading and empty states */
    .loading-state,
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #6b7280;
    }
    .loading-state {
      font-size: 1.1rem;
    }
    .empty-state h2 {
      color: #374151;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <div id="adcp-nav"></div>
  <script src="/nav.js"></script>

  <!-- Hero Section -->
  <section class="hero hero--article">
    <div class="hero-container">
      <h1>Insights</h1>
      <p class="hero-subtitle">Thought leadership on agentic AI and the future of advertising</p>
    </div>
  </section>

  <!-- Main Content -->
  <div class="container">
    <div id="perspectivesLoading" class="loading-state">
      Loading perspectives...
    </div>
    <div id="perspectivesEmpty" class="empty-state" style="display: none;">
      <h2>No perspectives yet</h2>
      <p>Check back soon for thought leadership content.</p>
    </div>
    <div id="articlesGrid" class="articles-grid" style="display: none;">
      <!-- Perspectives will be loaded here dynamically -->
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer footer--centered">
    <div class="footer-links">
      <a href="/">Home</a>
      <a href="https://docs.adcontextprotocol.org">AdCP Documentation</a>
      <a href="/members">Members</a>
      <a href="https://github.com/adcontextprotocol/adcp">GitHub</a>
      <a href="https://join.slack.com/t/agenticads/shared_invite/zt-3h15gj6c0-FRTrD_y4HqmeXDKBl2TDEA">Slack Community</a>
    </div>
    <div class="footer-copyright">
      &copy; 2025 AgenticAdvertising.org
    </div>
  </footer>

  <script>
    async function loadPerspectives() {
      const loadingEl = document.getElementById('perspectivesLoading');
      const emptyEl = document.getElementById('perspectivesEmpty');
      const gridEl = document.getElementById('articlesGrid');

      try {
        const response = await fetch('/api/perspectives');
        if (!response.ok) {
          throw new Error('Failed to load perspectives');
        }

        const perspectives = await response.json();

        if (perspectives.length === 0) {
          loadingEl.style.display = 'none';
          emptyEl.style.display = 'block';
          return;
        }

        // Build HTML for each perspective
        let html = '';
        perspectives.forEach(perspective => {
          const isExternal = perspective.content_type === 'link';
          const href = isExternal ? perspective.external_url : `/insights/${perspective.slug}`;
          const target = isExternal ? ' target="_blank" rel="noopener"' : '';
          const readMoreText = isExternal
            ? `Read on ${perspective.external_site_name || 'external site'}`
            : 'Read article';

          html += `
            <a href="${escapeHtml(href)}" class="article-card"${target}>
              <div class="article-card-content">
                ${perspective.category ? `<span class="article-category">${escapeHtml(perspective.category)}</span>` : ''}
                <h2>${escapeHtml(perspective.title)}</h2>
                <p>${escapeHtml(perspective.excerpt || perspective.subtitle || '')}</p>
              </div>
              <div class="article-card-footer">
                <span class="read-more">
                  ${readMoreText}
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </div>
            </a>
          `;
        });

        gridEl.innerHTML = html;
        loadingEl.style.display = 'none';
        gridEl.style.display = 'grid';

      } catch (error) {
        console.error('Error loading perspectives:', error);
        loadingEl.innerHTML = '<p style="color: #dc2626;">Failed to load perspectives. Please refresh the page.</p>';
      }
    }

    function escapeHtml(text) {
      if (!text) return '';
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Load perspectives when page loads
    loadPerspectives();
  </script>
</body>
</html>
